(self.webpackChunklite=self.webpackChunklite||[]).push([[68519],{98914:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var i=t(67294);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var r=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.11 12.23l-5.2-5.76L9.48 6l-.42.47-5.16 5.7.85.77L9.48 7.7 14.26 13l.85-.77z",fill:"#292929"});const o=function(e){return i.createElement("svg",a({width:19,height:19,viewBox:"0 0 19 19",fill:"none"},e),r)}},65211:(e,n,t)=>{"use strict";t.d(n,{i:()=>c});var i=t(319),a=t.n(i),r=t(61598),o=t(34279),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostJsonLd_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"seoTitle"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"logo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"previewImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"focusPercentX"}},{kind:"Field",name:{kind:"Name",value:"focusPercentY"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}}]}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"updatedAt"}},{kind:"Field",name:{kind:"Name",value:"isShortform"}},{kind:"Field",name:{kind:"Name",value:"shortformType"}},{kind:"Field",name:{kind:"Name",value:"structuredData"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleForPost_post"}}]}}].concat(a()(r.$m.definitions),a()(o.bq.definitions))},d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"postMetaDescription_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"seoDescription"}},{kind:"Field",name:{kind:"Name",value:"metaDescription"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"previewContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitle"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}}]}}].concat(a()(o.bh.definitions))},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"shortformPostMetaDescription_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"metaDescription"}},{kind:"Field",name:{kind:"Name",value:"seoDescription"}},{kind:"Field",name:{kind:"Name",value:"shortformType"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}}]}}].concat(a()(o.bh.definitions))},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostMetadata_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"socialTitle"}},{kind:"Field",name:{kind:"Name",value:"socialDek"}},{kind:"Field",name:{kind:"Name",value:"noIndex"}},{kind:"Field",name:{kind:"Name",value:"curationStatus"}},{kind:"Field",name:{kind:"Name",value:"canonicalUrl"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"metaDescription"}},{kind:"Field",name:{kind:"Name",value:"latestPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"isLimitedState"}},{kind:"Field",name:{kind:"Name",value:"readingTime"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"twitterScreenName"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ampEnabled"}},{kind:"Field",name:{kind:"Name",value:"twitterUsername"}},{kind:"Field",name:{kind:"Name",value:"facebookPageId"}}]}},{kind:"Field",name:{kind:"Name",value:"previewContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitle"}}]}},{kind:"Field",name:{kind:"Name",value:"previewImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"focusPercentX"}},{kind:"Field",name:{kind:"Name",value:"focusPercentY"}},{kind:"Field",name:{kind:"Name",value:"originalHeight"}},{kind:"Field",name:{kind:"Name",value:"originalWidth"}}]}},{kind:"Field",name:{kind:"Name",value:"isShortform"}},{kind:"Field",name:{kind:"Name",value:"noIndex"}},{kind:"Field",name:{kind:"Name",value:"curationStatus"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostJsonLd_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"postMetaDescription_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shortformPostMetaDescription_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shouldIndexPost_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"shortformPostTitle_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleDetails_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleForPost_post"}}]}}].concat(a()(r.$m.definitions),a()(l.definitions),a()(d.definitions),a()(s.definitions),a()(o.HF.definitions),a()(o.Pz.definitions),a()(o.dm.definitions),a()(o.bq.definitions))}},29674:(e,n,t)=>{"use strict";t.d(n,{w:()=>l});var i=t(319),a=t.n(i),r=t(92397),o=t(30817),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"PostRightColumn_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AuthorInfo_user"}}]}},{kind:"Field",name:{kind:"Name",value:"tags"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"TopicPill_tag"}}]}}]}}].concat(a()(r.x.definitions),a()(o.B.definitions))}},29621:(e,n,t)=>{"use strict";t.d(n,{i:()=>i,P:()=>a});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"buildBranchViewData_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"layerCake"}},{kind:"Field",name:{kind:"Name",value:"primaryTopic"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}}]}}]}}]},a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"buildBranchViewData_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postIds"}}]}}]}},94093:(e,n,t)=>{"use strict";t.d(n,{I:()=>p});var i,a=t(59713),r=t.n(a),o=t(67294);!function(e){e.S="S",e.L="L"}(i||(i={}));var l=t(42933),d=t(3149),s=t(98024),c=t(6688),m=t(80637),u=t(67122),p=function(e){var n=e.children,t=e.scale,a=void 0===t?i.L:t,p=e.alpha,g=void 0===p?.05:p,v=e.verticalMargins,k=void 0===v?{normal:"24px",small:"24px"}:v,f=e.horizontalMargins,h=void 0===f?{normal:"-16px",small:"-12px 0"}:f,S=e.dismissable,y=e.onClick,b=e.maxWidth,x=void 0===b?"740px":b,N=(0,c.I)();return o.createElement("div",{className:N((function(e){return r()({background:(0,u.Uy)(g),borderRadius:"4px",margin:"".concat(k.normal," ").concat(h.normal),position:"relative"},m.sm(e),{margin:"".concat(k.small," ").concat(h.small)})}))},o.createElement(l.x,{display:"flex",justifyContent:"space-between",maxWidth:x,padding:"16px",sm:{padding:"12px"}},o.createElement(s.F,{scale:a,color:"DARKER"},n),S&&y&&o.createElement(d.P,{onClick:y,size:"REGULAR",isPositionAbsolute:!1,compensateInnerPadding:!0,"data-testid":"close-button"})))}},70450:(e,n,t)=>{"use strict";t.d(n,{Y4:()=>l,NJ:()=>d,lc:()=>s});var i=t(59713),a=t.n(i),r=t(90038);function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){var n=e.miroId,t=e.originalWidth,i=e.originalHeight,a=e.focusPercentX,o=e.focusPercentY,l=e.croppedWidth;if(!n)return null;var d=(0,r.vz)({miroId:n,aspectRatio:16/9,croppedWidth:l,originalWidth:t,originalHeight:i,focusPercentX:a,focusPercentY:o}),s=(0,r.vz)({miroId:n,aspectRatio:4/3,croppedWidth:l,originalWidth:t,originalHeight:i,focusPercentX:a,focusPercentY:o}),c=(0,r.vz)({miroId:n,aspectRatio:1,croppedWidth:l,originalWidth:t,originalHeight:i,focusPercentX:a,focusPercentY:o}),m=new Set([d,s,c]);return Array.from(m)}function d(e){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({"@type":"ImageObject"},e)}function s(e){var n=e.id,t=e.originalWidth,i=e.originalHeight;if(!n||!t||!i)return null;var a=Math.min(i,60),o=a/i,l=Math.floor(t*o);return d({width:l,height:a,url:(0,r.W6)({miroId:n,width:l,freezeGifs:!0,strategy:r._S.Resample})})}},10483:(e,n,t)=>{"use strict";t.d(n,{d:()=>s,W:()=>d});var i=t(319),a=t.n(i),r=t(14894),o={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"LIHighlightMeter_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UpsellClickable_post"}}]}}].concat(a()(r.H.definitions))},l=t(91547),d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MeterController_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"lockedSource"}},{kind:"FragmentSpread",name:{kind:"Name",value:"LIHighlightMeter_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"LOHighlightMeter_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiContainer_post"}}]}}].concat(a()(o.definitions),a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"LOHighlightMeter_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]),a()(l.qt.definitions))},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MeterController_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postIds"}},{kind:"Field",name:{kind:"Name",value:"maxUnlockCount"}}]}}]}},87392:(e,n,t)=>{"use strict";t.d(n,{rh:()=>G});var i=t(28655),a=t.n(i),r=t(50008),o=t.n(r),l=t(63038),d=t.n(l),s=t(71439),c=t(67294),m=t(12291),u=t(23450),p=t.n(u),g=t(94093),v=t(51562),k=t(42933),f=function(e){var n=e.featureString,t=e.link,i=e.text,a=e.showTrialMeter;return c.createElement(v.W,{featureString:n,target:a?"cc-trial-highlight-box":"highlight-box"},c.createElement(g.I,null,c.createElement(v.W,{featureString:n,target:a?"cc-trial-copy":"copy",tag:"span"},i," "),c.createElement(k.x,{display:"inline",whiteSpace:"nowrap"},c.createElement(v.W,{featureString:n,target:a?"cc-trial-link":"link",tag:"span"},t))))},h=t(66893),S=t(76532),y=t(5731),b=t(62876),x=t(95760),N=t(51512),E=t(96907),F=t(67297),P=t(27952);function w(){var e=a()(["\n  fragment LIHighlightMeter_post on Post {\n    id\n    ...UpsellClickable_post\n  }\n  ","\n"]);return w=function(){return e},e}var I=function(e){var n=e.meterCount,t=e.meterLimit,i=e.post,a=(0,S.H)().value,r=(0,x.Av)(),o=null==a?void 0:a.isMembershipTrialEligible,l=!(!(0,h.P5)("enable_trial_upsell")||!o),d="li-highlight-meter-".concat(n);c.useEffect((function(){r.event("meter.viewed",{uiType:y.j.LIHighlightCTA,postId:i.id,meterCount:n,userId:null==a?void 0:a.id}),o&&r.event("experiment.eligible",{experimentId:"6797776ba4cf"})}),[]);var s,m=(0,F.v9)((function(e){return e.config.authDomain})),u=c.createElement(E.M,{tag:"span"},c.createElement(b.a,{linkStyle:"OBVIOUS",post:i,inline:!0,redirectUrl:(0,P.c5p)(m)},l?"Start your free trial":"Upgrade for unlimited access."));return c.createElement(N.cW,{source:{dimension:"post_counter",name:"upgrade_membership",postId:i.id}},c.createElement(f,{featureString:d,text:(s=t-n,s<=0?c.createElement(c.Fragment,null,"This is your ",c.createElement("b",null,"last")," free member-only story this month."):c.createElement(c.Fragment,null,"You have ",c.createElement("b",null,s)," free member-only ",p()("story",s)," left this month.")),link:u,showTrialMeter:l}))},_=(0,s.Ps)(w(),b.H),C=t(62181);function O(){var e=a()(["\n  fragment LOHighlightMeter_post on Post {\n    id\n  }\n"]);return O=function(){return e},e}var D=function(e){switch(e){case 1:return c.createElement(c.Fragment,null,"You have ",c.createElement("b",null,"2")," free member-only stories left this month.");case 2:return c.createElement(c.Fragment,null,"You have ",c.createElement("b",null,"1")," free member-only story left this month.");case 3:return c.createElement(c.Fragment,null,"This is your ",c.createElement("b",null,"last")," free member-only story this month.");default:return c.createElement(c.Fragment,null,"You've read all your free member-only stories this month.")}},A=function(e){var n=e.meterCount,t=e.post,i=(0,F.v9)((function(e){return e.config.productName})),a=function(e){switch(e){case 3:return"metered_view_3";case 2:return"metered_view_2";case 1:default:return"smart_meter"}}(n),r=(0,x.Av)(),o="lo-highlight-meter-".concat(n);c.useEffect((function(){r.event("meter.viewed",{uiType:y.j.LOHighlightCTA,postId:t.id,meterCount:n})}),[]);var l=c.createElement(C.R9,{linkStyle:"OBVIOUS",inline:!0,operation:"register",susiEntry:a},"Sign up for ".concat(i," and get an extra one"));return c.createElement(N.cW,{source:{postId:t.id}},c.createElement(f,{featureString:o,text:D(n),link:l,showTrialMeter:!1}))},T=(0,s.Ps)(O()),M=t(49544),R=t(72059),L=t(6688),j=t(11348),B=t(31235),U=t(172);function W(){var e=a()(["\n  fragment MeterController_meteringInfo on MeteringInfo {\n    postIds\n    maxUnlockCount\n  }\n"]);return W=function(){return e},e}function V(){var e=a()(["\n  fragment MeterController_post on Post {\n    creator {\n      id\n    }\n    isLocked\n    lockedSource\n    ...LIHighlightMeter_post\n    ...LOHighlightMeter_post\n    ...SusiContainer_post\n  }\n  ","\n  ","\n  ","\n"]);return V=function(){return e},e}var H=function(e){var n=e.meteringInfo,t=e.post,i=e.viewer,a=c.useState(!1),r=d()(a,2),o=r[0],l=r[1],s=n.maxUnlockCount||3,m=n.postIds.length;return m<=s?(0,j.sy)()&&(0,M.Dk)(i)?((0,j.Of)(),null):(o||l(!0),c.createElement(I,{meterCount:m,post:t,meterLimit:s})):null},z=function(e){var n=e.meterCount,t=e.post,i=c.useState(!1),a=d()(i,2),r=a[0],o=a[1];switch(n){case 1:case 2:case 3:return r||o(!0),c.createElement(A,{meterCount:n,post:t});default:return null}},G=function(e){var n=e.meteringInfo,t=e.post,i=(0,m.I0)(),a=(0,L.I)(),r=(0,B.xg)(),l=c.useState(!1),s=d()(l,2),u=s[0],p=s[1];c.useEffect((function(){void 0!==("undefined"==typeof document?"undefined":o()(document))&&p(!0),i((0,U.Dl)(!1))}),[]);var g=(0,S.H)(),v=g.loading,k=g.error,f=g.value;if(v||k)return c.createElement(c.Fragment,null);var h=f&&f.mediumMemberAt||void 0,y=t&&t.creator&&t.creator.id||void 0,b=f&&f.id||void 0,x=f?h||y===b:"LOCKED_POST_SOURCE_SYNDICATED"===t.lockedSource,N=!u||!t.isLocked||!n.postIds.includes(t.id)||x,E=u&&!N,F={height:E?"80px":"0px",overflow:E?"inherit":"hidden",transition:"height 2s cubic-bezier(0.23, 1, 0.32, 1) 0s"},P=f?c.createElement(H,{meteringInfo:n,post:t,viewer:f}):c.createElement(z,{meterCount:n.postIds.length,post:t});return c.createElement("div",{className:r?a(F):void 0},!N&&P)};(0,s.Ps)(V(),_,T,R.qt),(0,s.Ps)(W())},45627:(e,n,t)=>{"use strict";t.d(n,{cu:()=>Me,Y6:()=>Te,rU:()=>Ae});var i=t(28655),a=t.n(i),r=t(71439),o=t(67294),l=t(32149),d=t(2874);function s(){var e=a()(["\n  fragment MemberOnlyWall_post on Post {\n    id\n    creator {\n      id\n      name\n      username\n      ...useShouldShowEntityDrivenSubscription_creator\n      ...EntityDrivenSubscriptionLandingPageScreen_writer\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}var c=(0,r.Ps)(s(),l.G,d._k),m=t(63038),u=t.n(m),p=t(12291),g=t(46829),v={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CreatorsDropdownQuery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userViewedPartnerProgramCreators"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"imageId"}}]}}]}}]},k=t(27721),f=t(42933),h=t(24438),S=t(90038),y=function(e){return{display:"block",borderRadius:"50%",height:(0,h.a)(e),width:(0,h.a)(e)}};function b(e){var n=e.alt,t=e.diameter1,i=e.diameter2,a=e.diameter3,r=e.miroId1,l=e.miroId2,d=e.miroId3,s=e.freezeGifs,c=e.rules,m=[[y(t)],c],u=[[y(i)],c],p=[[y(a)],c];return o.createElement(o.Fragment,null,o.createElement(k.UV,{rules:m,alt:n,miroId:r,width:t,height:t,strategy:S._S.Crop,freezeGifs:s}),o.createElement(f.x,{paddingLeft:"2px",paddingTop:"2px",display:"flex",flexDirection:"column"},o.createElement(k.UV,{rules:u,alt:n,miroId:l,width:i,height:i,strategy:S._S.Crop,freezeGifs:s}),o.createElement(f.x,{paddingTop:"2px"},o.createElement(k.UV,{rules:p,alt:n,miroId:d,width:a,height:a,strategy:S._S.Crop,freezeGifs:s}))))}var x=t(32262),N=t(11852),E=t(63742),F=t(19464),P=t(80362),w=t(55099),I=t(98024),_=t(95760),C=t(51512),O=t(6688),D=t(77180),A=t(99015),T=t(98914),M=t(6522),R="PAY_MULTIPLE_WRITERS_OPTION_ID",L=function(e){return{outline:"none",cursor:"pointer",background:e.accentColor.fill.normal,":hover":{background:e.accentColor.fill.dark}}},j=function(e){return{outline:"none",cursor:"pointer",":hover":{background:e.baseColor.background.light}}},B=[],U=function(e){var n,t,i=e.post,a=e.onSelect,r=(0,O.I)(),l=(0,D.F)(),d=(0,g.useQuery)(v,{ssr:!1}),s=d.error,c=d.data,m=d.loading,p=(0,_.Av)(),k=o.useState(null===(n=i.creator)||void 0===n?void 0:n.id),h=u()(k,2),S=h[0],y=h[1];if(!i.creator||s)return null;B=(null==c?void 0:c.userViewedPartnerProgramCreators.filter((function(e){var n;return(null==e?void 0:e.id)!==(null===(n=i.creator)||void 0===n?void 0:n.id)})).filter((function(e){return Boolean(e)})))||[],i.creator&&B.unshift({id:i.creator.id,name:i.creator.name,imageId:i.creator.imageId}),B.splice(5,0,{id:R,name:"quality writing",imageId:null});var U=null!==(t=i.creator.imageId)&&void 0!==t?t:M.gG,W=function(e){return S===e?"WHITE":"DARKER"},V=o.createElement(f.x,{width:"330px"},o.createElement(x.mX,{padding:"0"},o.createElement(f.x,null,B.slice(0,6).filter((function(e){return null!=e})).map((function(e,n){var t,l,d,s;return o.createElement(C.cW,{key:"creator-".concat(e.id),source:{index:n},extendSource:!0},o.createElement("div",{className:r((s=e.id,S===s?L:j)),onClick:function(){return function(e){var n,t;a(e),y(e.id),e.id===R?p.event("paywallDropdown.allCreatorsOptionSelected",{defaultCreatorId:null==i||null===(n=i.creator)||void 0===n?void 0:n.id}):p.event("paywallDropdown.creatorSelected",{defaultCreatorId:null==i||null===(t=i.creator)||void 0===t?void 0:t.id,selectedCreatorId:e.id})}(e)},"aria-hidden":"true","data-testid":"creator-item"},o.createElement(x.Sl,null,e.id!==R?o.createElement(f.x,{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},o.createElement(N.z,{miroId:e.imageId||"",alt:e.name||"",diameter:32,freezeGifs:!1}),o.createElement(f.x,{paddingLeft:"21px"},o.createElement(I.F,{scale:"L",color:W(e.id)},e.name))):o.createElement(f.x,{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},o.createElement(b,{miroId1:(null===(t=B[0])||void 0===t?void 0:t.imageId)||U,miroId2:(null===(l=B[1])||void 0===l?void 0:l.imageId)||U,miroId3:(null===(d=B[2])||void 0===d?void 0:d.imageId)||U,alt:"Pay multiple writers",diameter1:21,diameter2:12,diameter3:9,freezeGifs:!1}),o.createElement(f.x,{display:"inline-block",paddingLeft:"21px"},o.createElement(I.F,{tag:"span",scale:"L",color:W(e.id)},"Don't want to pick one writer?"),o.createElement(I.F,{tag:"span",scale:"S",color:W(e.id)},"Split your membership fee among writers you read"))))))}))),o.createElement(f.x,{padding:"8px 20px 0px 20px",ariaHidden:"true"},o.createElement(E.V,null)),o.createElement(f.x,{padding:"10px 20px 18px 20px"},o.createElement(I.F,{scale:"S",color:"LIGHTER"},"These are writers you read most, who are eligible to receive a portion of your membership fee via Medium’s Partner Program."))));return o.createElement(F.B,null,(function(e){var n=e.isVisible,t=e.toggle,a=e.hide;return o.createElement("div",{onClick:function(){var e;t(),n||p.event("paywallDropdown.clicked",{defaultCreatorId:null==i||null===(e=i.creator)||void 0===e?void 0:e.id})},"data-testid":"popover-button","aria-hidden":"true"},o.createElement(P.J,{isVisible:n,hide:a,flip:!0,popoverRenderFn:function(){return V},display:"flex",targetDistance:10},o.createElement(w.z,{width:"240px",buttonStyle:"SUBTLE",size:"REGULAR",loading:m},o.createElement(f.x,{display:"flex",justifyContent:"center"},o.createElement(I.F,{scale:"M",color:"DARKER"},"Support a different writer"),o.createElement(f.x,{paddingLeft:"4px"},n?o.createElement(T.Z,{fill:l.baseColor.text.lighter}):o.createElement(A.Z,{fill:l.baseColor.text.lighter}))))))}))},W=t(67122),V=/rgba\(([\d]+),\s*([\d]+),\s*([\d]+),\s*([\d]+|[\d]*.[\d]+)\)/,H=function(e){var n,t,i=e.children,a=(0,D.F)();return o.createElement(o.Fragment,null,o.createElement(f.x,{marginTop:"-240px",background:"linear-gradient(".concat((n=a.backgroundColor,t=n.match(V),t?"rgba(".concat(t[1],", ").concat(t[2],", ").concat(t[3],", 0)"):(0,W.l9)(0)),", ").concat(a.backgroundColor,")"),height:"250px",position:"relative",width:"100%"}),o.createElement(f.x,{backgroundColor:"BACKGROUND"},o.createElement(f.x,{margin:"auto",maxWidth:"760px",sm:{margin:"0 24px 0"}},i)))},z=t(51562),G=t(53976),Y=t(76532),q=t(36511),K=t(37258),$=t(19608),Q=t(27168),J=t(48881),X=t(62876),Z=t(17614),ee=t(96907),ne=t(33572),te=t(85277),ie=t(67297),ae=t(69908),re=t(96879),oe=t(27952);function le(){var e=a()(["\n  fragment PayWall_post on Post {\n    id\n    creator {\n      id\n      name\n      imageId\n      referredMembershipCustomHeadline\n      referredMembershipCustomBody\n    }\n  }\n"]);return le=function(){return e},e}var de=function(e){var n,t=e.optimizelyFeatureString,i=e.post,a=e.showTrialPaywall,r=e.authDomain,l=e.enablePaywallConversionsForReferredMembers,d=e.enableCreatorsDropdown,s=e.selectedCreatorId,c=(0,Y.H)().value,m=i.creator&&i.creator.id,u=(0,oe.c5p)(r),p=(0,_.Av)();n=d?(0,re.Rk)((0,oe.c5p)(r),{subscribeToUserId:s||"",susiEntry:"post_paywall"}):(0,re.Rk)((0,oe.c5p)(r),{subscribeToUserId:m||"",susiEntry:"post_paywall"});var g=l?n:u,v=o.useCallback((function(){p.event("paywall.upgradeClicked",{postId:null==i?void 0:i.id,userId:null==c?void 0:c.id})}),[i,null==c?void 0:c.id]);return o.createElement(C.cW,{source:{dimension:"post_limit",name:"upgrade_membership",postId:i.id}},o.createElement(ee.M,null,o.createElement(f.x,{display:"inline-block",textAlign:"center"},o.createElement(z.W,{featureString:t,target:a?"trial-upsell-button":"upsell-button-".concat(c&&c.hasPastMemberships?"resume-membership":"upgrade")},o.createElement(X.a,{isButton:!0,onClick:v,buttonStyle:a?"BRAND":"STRONG",width:d?"240px":a||c&&c.hasPastMemberships?"182px":"104px",redirectUrl:g},a?"Start your free trial":c&&c.hasPastMemberships?"Resume membership":"Upgrade")))))},se=function(e){var n=e.declineSuggestedAccount,t=e.userSocialLogins,i=(0,p.I0)();return o.createElement(C.cW,{source:{susiEntry:"post_paywall"},extendSource:!0},o.createElement(f.x,{display:"flex",sm:{flexDirection:"column"}},o.createElement(f.x,{display:"flex",flexDirection:"row",justifyContent:"center"},t.facebook||t.google||t.twitter?o.createElement($.r,{userSocialLogins:t}):o.createElement(K.o,{onSuccess:function(){return i((0,te.Pc)({step:"CHECK_YOUR_INBOX",operation:"login",susiEntry:"post_paywall"}))},userId:t.userId},(function(e){var n=e.handleSubmit;return o.createElement(w.z,{buttonStyle:"SOCIAL",size:"REGULAR",onClick:n},"Send login link")})))),n&&o.createElement(f.x,{marginTop:"10px",marginRight:"5px",sm:{marginTop:"20px"},display:"flex",justifyContent:"center",flexDirection:"column"},o.createElement(I.F,{scale:"M"},o.createElement(Q.G,{declineSuggestedAccount:n,isSocial:!!t&&!!(t.facebook||t.google||t.twitter)}))))},ce=function(e){var n=e.declineSuggestedAccount,t=e.userSocialLogins,i=e.suggestedAccountEventData,a=e.showSuggestedAccount,r=e.postId;return o.createElement(C.cW,{source:{dimension:"post_limit_suggestion",name:"upgrade_membership",postId:r}},o.createElement(ee.M,{eventData:i},o.createElement(f.x,{display:"inline-block",textAlign:"center"},o.createElement(se,{declineSuggestedAccount:n,showSuggestedAccount:a,userSocialLogins:t}),o.createElement(f.x,{display:"flex",flexDirection:"row",marginTop:"10px",sm:{justifyContent:"center"}},o.createElement(I.F,{scale:"L"},o.createElement(X.a,{eventData:i,linkStyle:"OBVIOUS"},"Learn more about membership"))))))},me=function(e){var n=e.post,t=e.excludePadding,i=void 0!==t&&t,a=(0,ie.v9)((function(e){return e.config.authDomain})),r=(0,ie.v9)((function(e){return e.config.productName})),l=o.useState(n.creator),d=u()(l,2),s=d[0],c=d[1],m=(0,Y.H)().value,p=(0,q.r)().viewerId,g=(0,_.Av)(),v=null==m?void 0:m.isMembershipTrialEligible,k=!(!(0,G.VB)({name:"enable_trial_upsell",placeholder:!1})||!v),h=(0,ae.s)(),S="xs"===h||"sm"===h,y=!!(0,G.VB)({name:"optimizely_holdback",placeholder:!1}),b="Your membership fee directly supports ".concat(n.creator&&n.creator.name," and other writers you read. You'll also get full access to every story on ").concat(r,"."),x=n.creator&&n.creator.referredMembershipCustomBody,E=!!(0,G.VB)({name:"enable_referred_membership_entity_led_paywall",placeholder:!1}),F=!!(0,G.VB)({name:"enable_paywall_conversions_for_referred_members",placeholder:!1}),P=!!(0,G.VB)({name:"enable_paywall_with_dropdown",placeholder:!1}),w=!!(0,G.VB)({name:"enable_referred_memberships_custom_messaging",placeholder:!1}),C=!!(0,G.VB)({name:"enable_referred_memberships_custom_messaging_on_paywall",placeholder:!1}),O=w&&C;o.useEffect((function(){v&&g.event("experiment.eligible",{experimentId:"6797776ba4cf"})}),[v]),o.useEffect((function(){g.event("paywall.viewed",{userId:null==m?void 0:m.id})}),[]);var D="paywall",A=function(){var e,t,i;if(null===(e=i=P?s:n.creator)||void 0===e||!e.imageId)return null;var a=null!==(t=i.imageId)&&void 0!==t?t:M.gG;return o.createElement(f.x,{display:"flex",paddingBottom:"16px",justifyContent:"center"},o.createElement(N.z,{miroId:a,alt:i.name||"",diameter:80,freezeGifs:!1}))};return o.createElement(H,null,o.createElement(J.o,{postRenderCallback:function(){}},(function(e){var t,l=e.loading,d=e.showSuggestedAccount,u=e.declineSuggestedAccount,g=e.userSocialLogins;return l?o.createElement(o.Fragment,null):(d&&(D="suggested-account-paywall"),d&&(t={alternateUserSuggestionShown:d,alternateUserSuggestionAccountType:(0,ne.S)(g),alternateUserSuggestionTargetUserId:!!g&&g.userId,alternateUserSuggestionSourceUserId:p}),o.createElement(o.Fragment,null,o.createElement(z.W,{featureString:D,target:k?"trial-background-color":"background-color"},o.createElement(f.x,{display:"flex",justifyContent:"center",textAlign:"center",sm:{flexDirection:"column"}},o.createElement(f.x,{display:"flex",flexDirection:"column",padding:i?"48px 0 0":"48px 50px",sm:{padding:E?"0":"28px 16px 32px",textAlign:"center"}},(E||P||O)&&o.createElement(A,null),o.createElement(z.W,{featureString:D,target:k?"webCCTrialHeading":"fewerClicksHeading"},o.createElement(Z.F1,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},function(e,n,t,i,a,r,l){var d=a.showSuggestedAccount,s=a.showTrialPaywall,c=a.inHoldback,m=a.showEntityLedPaywall,u=a.enableCreatorsDropdown,p=a.enableCustomMessaging,g=n?(0,ne.J)(n):null;g=g&&g.length<=13?g:null;var v="Read every story from ".concat(t," (and thousands of other writers on ").concat(e,").");return d?"Switch to your member account for unlimited reading.":s?o.createElement(f.x,{textAlign:"center",sm:{marginBottom:"5px",textAlign:"center"}},g?"".concat(g,", keep reading."):"Keep reading."):m&&!u?o.createElement(f.x,{maxWidth:"680px",margin:"auto",textAlign:"center"},o.createElement(f.x,{sm:{marginBottom:"8px"}},g?"".concat(g,", read more from ").concat(t," — and everyone else on ").concat(e,"."):"This is a member-only story published by ".concat(t,"."))):u&&r?o.createElement(f.x,{maxWidth:"680px",margin:"auto",textAlign:"center",sm:{width:"327px"}},o.createElement(Z.F1,{scale:l?"S":"M",clamp:2},"Keep reading and support ",r.name)):p?o.createElement(f.x,{maxWidth:"680px",margin:"auto",textAlign:"center"},o.createElement(f.x,{sm:{marginBottom:"8px"}},i||v)):o.createElement(f.x,{textAlign:"left",sm:{marginBottom:"5px",textAlign:"center"}},c?"How to read this story — and everything else on ".concat(e,"."):g?t?"".concat(g,", read more from ").concat(t," — and everyone else on ").concat(e,"."):"".concat(g,", here's how to read this story — and everything else on ").concat(e,"."):t?"How to read this story from ".concat(t," — and everything else on ").concat(e,"."):"How to read this story — and everything else on ".concat(e,"."))}(r,m&&m.name,n.creator&&n.creator.name,n.creator&&n.creator.referredMembershipCustomHeadline,{showSuggestedAccount:d,showTrialPaywall:k,inHoldback:y,showEntityLedPaywall:E,enableCreatorsDropdown:P,enableCustomMessaging:O},s,S))),o.createElement(I.F,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},color:"DARKER",tag:"div"},!d&&!k&&o.createElement(o.Fragment,null,E&&!P?o.createElement(f.x,{maxWidth:"680px",margin:"auto",textAlign:"center"},o.createElement(f.x,{marginTop:"8px",marginBottom:"16px"},"Reward great thinking. When you become a member, you get unlimited access to Medium and 50% of your membership fee goes to"," ",n.creator&&n.creator.name,".*")):P?o.createElement(f.x,{maxWidth:"680px",margin:"auto",textAlign:"center",sm:{width:"327px"}},o.createElement(f.x,{marginTop:"10px",marginBottom:"10px"},"When you become a member, you will get unlimited access to Medium and 50% of your membership fee will go to ",null==s?void 0:s.name,".*")):O?o.createElement(f.x,{marginTop:"8px",marginBottom:"28px",textAlign:"center",sm:{width:"327px"}},o.createElement(f.x,{marginTop:"10px",marginBottom:"10px"},x||b)):o.createElement(z.W,{featureString:D,target:"second-header-fewer-clicks"},o.createElement(f.x,{marginTop:"8px",marginBottom:"28px",textAlign:"left",sm:{display:"inline-block",textAlign:"center"}},"You’ve read all your free member-only stories, become a member to get unlimited access. Your membership fee supports the voices you want to hear more from.")),o.createElement(f.x,{display:"flex",justifyContent:P||E||O?"center":void 0},P&&o.createElement(f.x,{display:"flex",alignItems:"center",xs:{flexDirection:"column"},sm:{flexDirection:"column"}},!S&&o.createElement(f.x,{display:"flex"},o.createElement(U,{post:n,onSelect:c}),o.createElement(f.x,{paddingLeft:"8px"},o.createElement(de,{optimizelyFeatureString:D,post:n,showTrialPaywall:k,authDomain:a,enablePaywallConversionsForReferredMembers:F,enableCreatorsDropdown:!0,selectedCreatorId:null==s?void 0:s.id}))),S&&o.createElement(f.x,null,o.createElement(de,{optimizelyFeatureString:D,post:n,showTrialPaywall:k,authDomain:a,enablePaywallConversionsForReferredMembers:F,enableCreatorsDropdown:!0,selectedCreatorId:null==s?void 0:s.id}),o.createElement(f.x,{paddingTop:"8px"},o.createElement(U,{post:n,onSelect:c})))),!P&&o.createElement(de,{optimizelyFeatureString:D,post:n,showTrialPaywall:k,authDomain:a,enablePaywallConversionsForReferredMembers:F})),(E||P)&&o.createElement(f.x,{paddingTop:"16px",margin:"auto",textAlign:"center"},o.createElement(I.F,{scale:"S",color:"LIGHTER"},"* Minus standard payment processing fees"))),o.createElement(z.W,{featureString:D,target:k?"subtitle-copy-web-cc-trial":"subtitle-copy-fewer-clicks"},o.createElement(f.x,{marginTop:d?"28px":"8px",marginBottom:"28px",paddingRight:"6px",paddingLeft:"6px",sm:{display:"inline-block"}},function(e,n,t,i){var a=t.showTrialPaywall;if(t.showSuggestedAccount&&n){var r=n.isMember,l=n.redactedEmailAddress;return o.createElement(o.Fragment,null,"Looks like you're coming from the ",r&&"member ","account"," ",o.createElement("b",null,l)," but you’re signed in as ",o.createElement("b",null,null==i?void 0:i.email),". Switch to your",r?" member account for unlimited access":" account",".")}return o.createElement(f.x,{textAlign:a?"center":"left"},a?"Start your 1 month free trial for unlimited access to everything on ".concat(e,". If it’s not for you, cancel anytime."):"")}(r,g,{showSuggestedAccount:d,showTrialPaywall:k},m)))),!!d&&g&&o.createElement(ce,{declineSuggestedAccount:u,userSocialLogins:g,suggestedAccountEventData:t,showSuggestedAccount:d,postId:n.id}),k&&!d&&o.createElement(de,{optimizelyFeatureString:D,post:n,showTrialPaywall:k,authDomain:a,enablePaywallConversionsForReferredMembers:F}))))))})))},ue=(0,r.Ps)(le()),pe=t(6401),ge=t(66893),ve=t(62181),ke=t(5731),fe=t(59317),he=t(81405),Se=t(90174),ye=t(4134),be=t(41996),xe=t(37581);function Ne(){var e=a()(["\n  fragment RegWall_meteringInfo on MeteringInfo {\n    postIds\n  }\n"]);return Ne=function(){return e},e}function Ee(){var e=a()(["\n  fragment RegWall_post on Post {\n    id\n    lockedSource\n    ...SusiClickable_post\n  }\n  ","\n"]);return Ee=function(){return e},e}var Fe="post_regwall",Pe=function(e){var n=e.enablePasswords,t=e.meterCount,i=e.optimizelyFeatureString,a=e.postId,r={operation:"register"},l=(0,fe.j)().openModal,d=function(e){var t=e.children;return n?o.createElement(z.W,{featureString:i,target:"google-button"},t):t};return o.createElement(f.x,{display:"flex",flexDirection:"column",textAlign:"center",sm:{flexDirection:"column"}},o.createElement(z.W,{featureString:i,target:"google-button"},o.createElement(f.x,{margin:"".concat(n?"32px":"62px"," 0 10px"),sm:{margin:"40px 0 12px 0"}},o.createElement(xe.$,{eventData:{meterCount:t,operation:r.operation,postId:a}},o.createElement(ye.x,r)))),o.createElement(d,null,o.createElement(f.x,{marginBottom:n?"32px":"52px",sm:{marginBottom:"40px"}},o.createElement(xe.$,{eventData:{meterCount:t,operation:r.operation,postId:a}},n?o.createElement(he.R,{goToEmailAuthStep:function(){l({step:"ENTER_EMAIL",susiEntry:Fe,operation:"register"})},operation:"register"}):o.createElement(Se.q,r)))))},we=function(e){var n=e.meteringInfo,t=e.post,i=e.setIsLORegWallVisible,a=(0,_.Av)(),r=!!(0,ge.P5)("enable_passwords"),l="LOCKED_POST_SOURCE_SYNDICATED"===t.lockedSource,d=!!(0,G.VB)({name:"enable_mobile_regwall_read_in_app_button",placeholder:!1}),s=(0,ae.s)()||be.j.lg,c=s===be.j.xs||s===be.j.sm,m="".concat(l?"syndicated-":"","regwall");return o.useEffect((function(){a.event("meter.viewed",{meterCount:null==n?void 0:n.postIds.length,postId:t.id,uiType:l?ke.j.SyndicatedRegwall:ke.j.RegWall}),i&&i(!0),c&&a.event("experiment.eligible",{experimentId:"fd487b2905f"})}),[]),o.createElement(C.cW,{source:{postId:t.id,susiEntry:Fe}},o.createElement(H,null,o.createElement(z.W,{featureString:m,target:"background-color"},o.createElement(f.x,{display:"flex",textAlign:"center",justifyContent:"center",sm:{flexDirection:"column",textAlign:"center"}},o.createElement(f.x,{padding:"48px 56px",sm:{padding:"28px 16px 48px"}},o.createElement(z.W,{featureString:m,target:"heading"},o.createElement(Z.F1,{scale:{xs:"S",sm:"S",md:"M",lg:"M",xl:"M"}},o.createElement(f.x,{display:"none",sm:{display:"block"}},"To keep reading this story, get the free app or log in."),o.createElement(f.x,{display:"block",sm:{display:"none"}},"Read the rest of this story with a free account."))),o.createElement(I.F,{color:"DARKER",scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"},tag:"div"},o.createElement(f.x,{display:"none",margin:"auto",paddingTop:"10px",width:"500px"},"You’ll also discover more fresh thinking personalized to your interests and can follow your favorite authors, publications, and topics."),o.createElement(f.x,{display:"none",sm:{display:"block"}},o.createElement(f.x,{margin:"".concat(r?"40px":"42px"," 0")},o.createElement(pe.a,{isButton:!0,postId:t.id,appEntry:"regwall",copy:"".concat(d?"Read in app":"Open in app")})),o.createElement(z.W,{featureString:m,target:"skip-app-copy"},o.createElement(f.x,{marginBottom:"-20px"},"Or, continue in mobile web"))),o.createElement(Pe,{meterCount:null==n?void 0:n.postIds.length,optimizelyFeatureString:m,postId:t.id,enablePasswords:r}),o.createElement(z.W,{featureString:m,target:"sign-in-copy",tag:"span"},"Already have an account?"," "),o.createElement(z.W,{featureString:m,target:"sign-in-link",tag:"span"},o.createElement(ve.R9,{linkStyle:"OBVIOUS",operation:"login",post:t,susiEntry:Fe},"Sign in"))))))))},Ie=(0,r.Ps)(Ee(),ve.qU),_e=(0,r.Ps)(Ne()),Ce=t(39935);function Oe(){var e=a()(["\n  fragment Wall_meteringInfo on MeteringInfo {\n    ...RegWall_meteringInfo\n  }\n  ","\n"]);return Oe=function(){return e},e}function De(){var e=a()(["\n  fragment Wall_post on Post {\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n    }\n    isLocked\n    isMarkedPaywallOnly\n    ...MemberOnlyWall_post\n    ...PayWall_post\n    ...RegWall_post\n  }\n  ","\n  ","\n  ","\n"]);return De=function(){return e},e}var Ae=(0,r.Ps)(De(),c,ue,Ie),Te=(0,r.Ps)(Oe(),_e),Me=function(e){var n=e.post,t=e.meteringInfo,i=e.excludePadding,a=e.setIsLORegWallVisible,r=n.id,l=n.content.isLockedPreviewOnly,d=(0,Y.H)(),s=d.value,c=d.loading;if(!(0,Ce.n)(r,l).loading&&l){if(s)return o.createElement(me,{post:n,excludePadding:i});if(!c)return o.createElement(we,{post:n,meteringInfo:t,setIsLORegWallVisible:a})}return null}},47921:(e,n,t)=>{"use strict";t.d(n,{h:()=>O});var i=t(59713),a=t.n(i),r=t(67294),o=t(70405),l=t(12291),d=t(28655),s=t.n(d),c=t(319),m=t.n(c),u=t(82492),p=t.n(u),g=t(71439),v=t(68254),k=t.n(v),f=t(70450),h=t(90038),S=t(96879),y=t(22744),b=t(27952),x=t(61598);function N(){var e=s()(["\n  fragment PostJsonLd_post on Post {\n    id\n    title\n    seoTitle\n    mediumUrl\n    creator {\n      name\n      username\n      ...userUrl_user\n    }\n    collection {\n      id\n      name\n      domain\n      slug\n      logo {\n        id\n        originalWidth\n        originalHeight\n      }\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n      originalWidth\n      originalHeight\n    }\n    isLocked\n    firstPublishedAt\n    updatedAt\n    isShortform\n    shortformType\n    structuredData\n    ...getTitleForPost_post\n  }\n  ","\n  ","\n"]);return N=function(){return e},e}function E(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function F(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?E(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var P=(0,l.$j)((function(e){var n=e.config,t=n.productName,i=n.defaultImages,a=n.collectionStructuredData,r=e.navigation;return{currentLocation:r.currentLocation,host:r.host,productName:t,defaultImages:i,collectionStructuredData:a}}))((function(e){var n=e.currentLocation,t=e.host,i=e.post,a=e.postDescription,l=e.productName,d=e.defaultImages,s=e.collectionStructuredData,c=i.collection,u=i.creator,g=i.id,v=i.mediumUrl,x=i.isLocked,N=i.previewImage,E=i.firstPublishedAt,P=i.updatedAt,w=i.structuredData,I=(0,y._t)(i,l),_={id:d.postLogo.imageId,originalWidth:d.postLogo.width,originalHeight:d.postLogo.height},C={id:d.orgLogo.imageId,originalWidth:d.orgLogo.width,originalHeight:d.orgLogo.height},O=c?{"@type":"Organization",name:c.name,url:c.domain||(0,S.l1)(t,(0,b.WGd)(c,n)),logo:function(e){if(!e||!e.logo||!e.logo.id)return(0,f.lc)(C);var n=(0,f.lc)(e.logo);return n&&60===n.height&&n.width<=600?n:(0,f.lc)(C)}(c)}:{"@type":"Organization",name:l,url:(0,S.l1)(t,"/"),logo:(0,f.lc)(C)};c&&s&&s[c.id]&&p()(O,s[c.id].data);var D=N&&N.id?(0,f.Y4)(F(F({},N),{},{miroId:N.id,croppedWidth:1200})):(0,f.NJ)({url:(0,h.W6)({miroId:_.id,width:_.originalWidth}),height:_.originalHeight,width:_.originalWidth}),A=a||"",T=x?{isAccessibleForFree:"False",hasPart:{"@type":"WebPageElement",isAccessibleForFree:"False",cssSelector:".meteredContent"}}:{},M={"@context":"http://schema.org"},R=F({"@type":"NewsArticle",image:D,url:v,dateCreated:E&&new Date(E).toISOString(),datePublished:E&&new Date(E).toISOString(),dateModified:P&&new Date(P).toISOString(),headline:I,name:I,description:A,identifier:g,author:u&&u.name&&u.username?{"@type":"Person",name:u.name||u.username,url:(0,b.AWr)(u,t)}:null,creator:u&&[u.name],publisher:O,mainEntityOfPage:v},T),L=F(F({},M),R);if(w&&w.length>0)try{var j=JSON.parse(w);if(j&&null!=j&&j["@graph"]&&(null==j?void 0:j["@graph"].length)>0){var B=((null==j?void 0:j["@graph"])||[]).filter((function(e){return(null==e?void 0:e["@type"])&&"NewsArticle"!==(null==e?void 0:e["@type"])}));B&&B.length>0&&(L=F(F({},M),{},{"@graph":[R].concat(m()(B))}))}}catch(e){}return r.createElement(o.q,null,r.createElement("script",{type:"application/ld+json"},k()(L,{isJSON:!0})))})),w=((0,g.Ps)(N(),y.bq,x.$m),t(27390)),I=t(71794);function _(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var O=(0,l.$j)((function(e){return{authDomain:e.config.authDomain,host:e.navigation.host,productName:e.config.productName}}))((function(e){var n,t,i,a=e.isAmp,l=e.host,d=e.authDomain,s=e.productName,c=e.post,m=c.canonicalUrl,u=c.collection,p=c.creator,g=c.id,v=c.latestPublishedAt,k=c.mediumUrl,f=c.previewContent,S=c.socialTitle,x=c.socialDek,N=c.visibility,E=c.isShortform,F=u&&u.ampEnabled,_=p&&p.name,O=(0,y.yB)(c),D=c.title||"",A=O.latestTitle||D;if(E){var T=C(C({},c),{},{title:A});t=(0,y.oS)(T,s,O.hasTitleGraf).trim(),i=(0,I.OO)(c,O.hasTitleGraf)}else t=(0,y._t)(c,s,O,!0).trim(),i=(0,I.j7)(c);var M,R,L=x||f&&f.subtitle||i;if(c&&c.previewImage&&c.previewImage.id&&!c.isLimitedState){var j=c.previewImage;M=(0,h.vz)({miroId:j.id,aspectRatio:1.9,croppedWidth:j.originalWidth?Math.min(j.originalWidth,1200):1200,originalWidth:j.originalWidth,originalHeight:j.originalHeight,focusPercentX:j.focusPercentX,focusPercentY:j.focusPercentY})}else if(c.isLimitedState){var B={id:"1*3SjgcTt7wCYYS10ff6-0JQ.png",originalWidth:748,originalHeight:390,focusPercentX:50,focusPercentY:40};M=(0,h.vz)({miroId:B.id,aspectRatio:1.9,croppedWidth:B.originalWidth?Math.min(B.originalWidth,1200):1200,originalWidth:B.originalWidth,originalHeight:B.originalHeight,focusPercentX:B.focusPercentX,focusPercentY:B.focusPercentY})}p&&p.username&&(R=(0,b.AWr)(p,d));var U=(0,b.CK_)(g),W=!(null!==(n=(0,y.c_)(c))&&void 0!==n&&n.shouldIndexPost),V=v&&new Date(v).toISOString(),H=(0,w.Vd)(c.readingTime||0),z=p&&p.twitterScreenName,G=u&&u.twitterUsername||"Medium",Y=u&&u.facebookPageId,q=S||D||A;c.isLimitedState&&(q="");var K=c.isLimitedState?"":L,$=r.useMemo((function(){var e;return r.createElement(o.q,{htmlAttributes:a?{amp:void 0}:{}},r.createElement("meta",{property:"og:type",content:"article"}),V&&r.createElement("meta",{property:"article:published_time",content:V}),F&&!a?r.createElement("link",{rel:"amphtml",href:(0,b.VcI)(l,g)}):null,r.createElement("title",null,t),r.createElement("meta",{name:"title",content:t}),r.createElement("meta",{property:"og:title",content:q}),r.createElement("meta",{property:"twitter:title",content:q}),Y&&r.createElement("meta",{property:"fb:pages",content:Y}),r.createElement("meta",{name:"twitter:site",content:"@".concat(G)}),r.createElement("meta",{name:"twitter:app:url:iphone",content:U}),r.createElement("meta",{property:"al:android:url",content:U}),r.createElement("meta",{property:"al:ios:url",content:U}),r.createElement("meta",{property:"al:android:app_name",content:"Medium"}),i&&r.createElement("meta",{name:"description",content:i}),L&&r.createElement("meta",{property:"og:description",content:K}),L&&r.createElement("meta",{property:"twitter:description",content:K}),r.createElement("meta",{property:"og:url",content:null!=k?k:void 0}),r.createElement("meta",{property:"al:web:url",content:null!=k?k:void 0}),M&&r.createElement("meta",{property:"og:image",content:M}),M&&r.createElement("meta",{name:"twitter:image:src",content:M}),r.createElement("meta",{name:"twitter:card",content:M?"summary_large_image":"summary"}),R&&r.createElement("meta",{property:"article:author",content:R}),R&&r.createElement("link",{rel:"author",href:R}),z&&r.createElement("meta",{name:"twitter:creator",content:"@".concat(z)}),_&&r.createElement("meta",{name:"author",content:_}),r.createElement("link",{rel:"canonical",href:null!==(e=m||k)&&void 0!==e?e:void 0}),r.createElement("link",{rel:"alternate",href:(0,b.zix)((0,b.o2w)("medium.com",c.id))}),r.createElement("meta",{name:"robots",content:"".concat(W?"noindex":"index",",follow,max-image-preview:large")}),r.createElement("meta",{name:"referrer",content:"UNLISTED"!==N?"unsafe-url":"origin"}),a?null:r.createElement("meta",{name:"twitter:label1",content:"Reading time"}),a?null:r.createElement("meta",{name:"twitter:data1",content:"".concat(H," min read")}))}),[a,t,m,k,M,F,g,S,i,R,_,z,U,W,V]);return r.createElement(r.Fragment,null,$,r.createElement(P,{post:c,postDescription:i}))}))},50188:(e,n,t)=>{"use strict";t.d(n,{kD:()=>v,T8:()=>k,Qw:()=>f});var i,a,r=t(59713),o=t.n(r),l=t(57953),d="post-view",s="post-read",c="topic-view",m="medium-search",u="external-search",p=(i={},o()(i,d,200),o()(i,s,200),o()(i,c,200),o()(i,m,200),o()(i,u,200),i),g=(a={},o()(a,d,new l.Z("pv")),o()(a,s,new l.Z("pr")),o()(a,c,new l.Z("tv")),o()(a,m,new l.Z("ms")),o()(a,u,new l.Z("es")),a),v=function(e){h(d,e,Date.now())},k=function(e){h(s,e,Date.now())},f=function(e){h(c,e,Date.now())},h=function(e,n,t){var i=g[e];i.getCount()===p[e]&&i.clean();try{i.set(n,t)}catch(e){i.clean()}}},17546:(e,n,t)=>{"use strict";t.d(n,{db:()=>m,bo:()=>u,uz:()=>p});var i=t(67294),a=t(50188),r=t(36511),o=t(39050),l=t(95760),d=t(11348),s=t(67297),c=t(22744),m=1,u=2,p=function(e){var n=e.post,t=e.clientViewedContext,m=e.overrideCommonData,u=void 0===m?{}:m,p=(0,l.Av)(),g=(0,r.r)(),v=g.loading,k=g.viewerId,f=(0,s.v9)((function(e){return e.client.viewerIsBot})),h=k&&(0,o.Q)(k),S=(null==n?void 0:n.collection)||{},y=S.id,b=S.slug,x=((null==n?void 0:n.content)||{}).validatedShareKey,N=null==n?void 0:n.id;i.useEffect((function(){if(!v&&N&&k){if(null!=n&&n.isPublished){h||(n.isLocked?(0,d.yB)():(0,d.B8)());var e=(0,c.c_)(n),i=e.shouldIndexPost,r=e.indexReason;f&&p.event("post.clientBotCrawled",{postId:N,userId:k,userAgent:navigator.userAgent,lastCrawledAt:Date.now(),isIndexable:i,indexReason:r}),p.event("post.clientViewed",{postId:N,collectionId:y,collectionSlug:b,context:t,isFriendLink:!!x,source:"post_page"},u)}else p.event("post.draftViewed",{postId:N});return h||(0,a.kD)(N),function(){}}}),[N,k,v])}},4547:(e,n,t)=>{"use strict";t.d(n,{t:()=>b});var i,a=t(75341),r=t(67294),o=t(12291),l=t(45113),d=t(36511),s=t(76532),c=t(73891),m=t(37395),u=t(32589),p=t(172),g=t(8403),v=t(67297),k=t(30389),f=t(27952),h=t(47578),S=t(33572);!function(e){e.initial="initial",e.repub="repub"}(i||(i={}));var y=t(17546),b=function(e){var n=e.post,t=e.meteringInfo,b=e.clientViewedContext,x=void 0===b?y.db:b,N=e.overrideCommonData,E=void 0===N?{}:N,F=(0,a.SK)();!function(e){var n,t=e.post,i=e.meteringInfo,a=(0,o.I0)(),h=(0,d.r)(),S=h.loading,y=h.viewerId,b=(0,g.PM)(),x=(0,v.p9)((function(e){return e.config.isAmp})),N=(0,v.v9)((function(e){return e.navigation.referrer})),E=(0,v.v9)((function(e){return e.config.authDomain})),F=null==t?void 0:t.id,P=(0,k.P)(),w=P.inAppBrowser,I=P.loading,_=(0,u.Pd)(null==t?void 0:t.creator),C=_.viewerEdge,O=_.loading,D=(0,c.gY)(null==t?void 0:t.collection),A=D.viewerEdge,T=D.loading,M=(0,m.l)(null==t||null===(n=t.primaryTopic)||void 0===n?void 0:n.id),R=M.viewerEdge,L=M.loading,j=T||O||L,B=(0,s.H)(),U=B.loading,W=B.value;x&&(W=void 0),r.useEffect((function(){if(F&&!S&&!U&&y&&!I&&!j){if(null!=t&&t.isPublished){var e=(0,l.RD)({inAppBrowser:w,post:t,meteringInfo:i,referrer:N,referrerSource:b,viewer:W,currentUserId:y,creatorViewerEdge:C,collectionViewerEdge:A,topicViewerEdge:R});t.collection&&t.collection.domain&&(e.data.$canonical_url=(0,f.o2w)(E,F)),(0,l.Pu)(e),a((0,p.aj)(e)),a((0,p.QZ)())}return function(){a((0,p.Uo)())}}}),[F,U,W,S,y,I,w,W,j])}({post:n,meteringInfo:t}),function(e){var n=e.post,t=(0,v.p9)((function(e){return e.config.isAmp})),a=null==n?void 0:n.id,o=(0,s.H)(),l=o.loading,d=o.value;t&&(d=void 0);var c=(0,g.Wd)("postPublishedType");r.useEffect((function(){if(a&&!l){if(null!=n&&n.isPublished){var e=d&&d.name?(0,S.J)(d.name):void 0;(0,h.KQ)({post:n},e),function(e,n){var t;e===i.initial&&(null!==(t=n.collection)&&void 0!==t&&t.id?(0,h.VT)(h.Vy.PostPublishedCollection):(0,h.VT)(h.Vy.PostPublished),(0,h.VT)(h.Vy.PostPublishedAggregate))}(c,n)}return function(){}}}),[a,l,d])}({post:F?null:n}),(0,y.uz)({post:n,clientViewedContext:x,overrideCommonData:E})}},68519:(e,n,t)=>{"use strict";t.d(n,{m:()=>Re});var i=t(67154),a=t.n(i),r=t(59713),o=t.n(r),l=t(63038),d=t.n(l),s=t(82492),c=t.n(s),m=t(46829),u=t(67294),p=t(5977),g=t(52957),v=t(34488),k=t(87392),f=t(45627),h=t(44470),S=t(30570),y=t(4743),b=t(47921),x=t(15789),N=t(17546),E=t(4547),F=t(66712),P=t(93912),w=t(50077),I=t(76532),_=t(63742),C=t(42933),O=t(30027),D=t(57693),A=t(95760),T=t(51512),M=t(58491),R=t(66210),L=t(36891),j=t(15699),B=t(61250),U=t(14391),W=t(8403),V=t(67297),H=t(32261),z=t(64227),G=t(27140),Y=t(96879),q=t(19732),K=t(19497),$=t(27952),Q=t(6688);function J(){return(J=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var X=u.createElement("circle",{cx:16,cy:16,r:16,fill:"#292929"}),Z=u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.77 16.48l5.4 5.4.7-.7-5.4-5.4 4.7-4.7-.71-.7-4.69 4.69-4.69-4.7-.7.71 4.68 4.7-5.4 5.4.71.7 5.4-5.4z",fill:"#FAFAFA"});const ee=function(e){return u.createElement("svg",J({width:32,height:32,fill:"none"},e),X,Z)};var ne=function(){return{border:"none",padding:"0",background:"transparent",cursor:"pointer"}},te={xs:"60px",sm:"60px",md:"40px",lg:"40px",xl:"40px"},ie=function(e){var n=e.expansionRef,t=e.basePostUrl,i=e.referrer,a=e.referrerSource,r=(0,Q.I)(),o=(0,p.k6)(),l=(0,S.sK)().clearExpandedState,d=(0,A.Av)();return u.createElement(C.x,{position:"sticky",top:te,height:"0",textAlign:"right",float:"right",marginRight:{xs:"0px",sm:"0px",md:"-42px",lg:"-42px",xl:"-42px"}},u.createElement(C.x,{bottom:"20px"},u.createElement("button",{type:"button",className:r(ne),onClick:function(){var e,r=null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect().y;r&&r<0&&window.scrollBy(0,r),l(),o.goBack(),d.event("client.navigate",{metadata:{},newPath:i||"",oldPath:t||"",source:a||""})},"aria-label":"Collapse"},u.createElement(ee,null))))},ae=t(319),re=t.n(ae),oe=t(61253),le=t(73018),de=t(19856),se=t(6776),ce={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"InlineExpansionContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"customStyleSheet"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"blogroll"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"visibility"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}},{kind:"Field",name:{kind:"Name",value:"followedCollections"}},{kind:"Field",name:{kind:"Name",value:"socialStats"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"followingCount"}},{kind:"Field",name:{kind:"Name",value:"collectionFollowingCount"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserSubscribeButton_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"canToggleEmail"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"isAuroraEligible"}},{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isEditor"}}]}},{kind:"Field",name:{kind:"Name",value:"tagline"}}]}},{kind:"Field",name:{kind:"Name",value:"customStyleSheet"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"blogroll"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"visibility"}}]}}]}}]}}].concat(re()(se.w.definitions))},me=t(29674),ue=t(65211),pe=t(10483),ge=t(29621),ve={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"usePostBranchView_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"domain"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"buildBranchViewData_post"}}]}}].concat(re()(ge.i.definitions))},ke=([{kind:"FragmentDefinition",name:{kind:"Name",value:"usePostBranchView_meteringInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"buildBranchViewData_meteringInfo"}}]}}].concat(re()(ge.P.definitions)),t(34279)),fe={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"usePostClientViewedReporter_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"validatedShareKey"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"shouldIndexPost_post"}}]}}].concat(re()(ke.HF.definitions))},he={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExpandablePostExpandedQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PostMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"postResult"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"text"}}]}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"InteractivePostBody_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"Wall_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ExpandablePost_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"InlineExpansionContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostReadTracker_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostRightColumn_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostMetadata_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MeterController_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"usePostBranchView_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"usePostClientViewedReporter_post"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"meterPost"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MeteringInfo"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"maxUnlockCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"Wall_meteringInfo"}}]}}]}}]}}].concat(re()(oe.U.definitions),re()(le.r.definitions),re()(de.bj.definitions),re()(ce.definitions),re()([{kind:"FragmentDefinition",name:{kind:"Name",value:"PostReadTracker_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"sequence"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sequenceId"}}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}}]}}]}}]),re()(me.w.definitions),re()(ue.i.definitions),re()(pe.W.definitions),re()(ve.definitions),re()(fe.definitions),re()(le.Y.definitions))},Se=t(85090),ye=t(93335),be=t(96843),xe=t(92745),Ne=["100%","95%","93%","98%","98%"],Ee=function(){return u.createElement(C.x,{width:"100%"},Ne.map((function(e,n){return u.createElement(C.x,{key:"placeholder-".concat(n),width:e,height:"16px",marginBottom:"18px",backgroundColor:"BASE_NORMAL"})})))},Fe=function(){var e=(0,Q.I)(),n=(0,xe.P)();return u.createElement("div",{className:e((function(){return n}))},u.createElement(Ee,null))},Pe=t(10649),we=t(82318),Ie=function(e){var n=e.href,t=e.onReadMore,i=(0,Q.I)();return u.createElement(we.r,{href:n,onClick:t},u.createElement("div",{className:i((function(e){return{position:"absolute",top:0,backgroundColor:e.backgroundColor,height:"100%",width:"100%",opacity:"80%",zIndex:"1"}}))}))};function _e(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function Ce(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_e(Object(t),!0).forEach((function(n){o()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_e(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Oe=function(e){return{border:0,height:"1px",backgroundColor:e.baseColor.border.lighter,margin:0}},De={xs:{marginTop:"32px",marginBottom:"30px"},sm:{marginTop:"32px",marginBottom:"30px"},md:{marginTop:"40px",marginBottom:"50px"},lg:{marginTop:"40px",marginBottom:"50px"},xl:{marginTop:"40px",marginBottom:"50px"}},Ae={xs:{marginTop:"30px",marginBottom:"30px"},sm:{marginTop:"30px",marginBottom:"30px"},md:{marginTop:"50px",marginBottom:"50px"},lg:{marginTop:"50px",marginBottom:"50px"},xl:{marginTop:"50px",marginBottom:"50px"}},Te=[U.NJ.H3,U.NJ.H4],Me=[U.NJ.IMG,U.NJ.IFRAME],Re=u.memo((function(e){var n,t,i,r,l,s,U,Q,J=e.post,X=e.excludeMargin,Z=void 0!==X&&X,ee=e.includeTopDivider,ne=void 0===ee||ee,te=e.includeBottomDivider,ae=void 0!==te&&te,re=e.isFirst,oe=void 0!==re&&re,le=e.publisher,de=e.hideAuthor,se=void 0!==de&&de,ce=e.index,me=e.maxWidthSize,ue=void 0===me?"inset":me,pe=e.showInResponseToEntityPreview,ge=void 0!==pe&&pe,ve=e.mayShowPinned,ke=void 0!==ve&&ve,fe=e.showHighDensityPreview,xe=void 0!==fe&&fe,Ne=e.highDensityPreviewReason,Ee=e.showBylinePublisherInfo,we=void 0!==Ee&&Ee,_e=e.isMediumApp,Re=void 0!==_e&&_e,Le=e.showNegativeSignalMenu,je=void 0!==Le&&Le,Be=e.footerActionsMenu,Ue=!!(0,I.H)().value,We=Re?"app":ue,Ve=u.useRef(null),He=u.useRef(null),ze=u.useRef(null),Ge=u.useState(!1),Ye=d()(Ge,2),qe=Ye[0],Ke=Ye[1],$e=(0,S.sK)(),Qe=$e.expandedPostId,Je=$e.setExpandedPostId,Xe=$e.expandedPost,Ze=$e.setExpandedPost,en=$e.postInView,nn=$e.setPostInView,tn=$e.clearExpandedState,an=(null==Xe?void 0:Xe.id)===J.id,rn=(0,G.D)(Xe),on=(0,A.Av)(),ln=(0,W.G1)(),dn=(0,T.Lk)(),sn=Ce(Ce({},dn),{},{index:ce}),cn=(0,W.he)(),mn=(0,V.v9)((function(e){return e.navigation.referrer}));an&&(mn=cn);var un=(0,v.D)(),pn=(0,T.f0)(sn),gn=un(J),vn=(0,Y.Rk)(gn,{source:pn});(0,M.t)(Ue,Ve,Xe,an);var kn=u.useRef(null);(0,R.V)(kn,J,an);var fn=J.id,hn=J.collection,Sn=J.extendedPreviewContent,yn=J.isLocked,bn=J.firstPublishedAt,xn=J.latestPublishedAt,Nn=J.mediumUrl,En=J.pinnedAt,Fn=J.pinnedByCreatorAt,Pn=J.visibility,wn=(0,p.k6)(),In=(0,W.PM)();dn&&an&&(In=(0,T.f0)(dn));var _n={referrer:mn,sk:ln,source:In},Cn=(0,m.useLazyQuery)(he,{variables:{postId:J.id,postMeteringOptions:_n}}),On=d()(Cn,2),Dn=On[0],An=On[1],Tn=An.called,Mn=An.data,Rn=An.loading,Ln=An.error,jn=null==Mn?void 0:Mn.meterPost,Bn=an&&"Post"===(null==Xe?void 0:Xe.__typename)?Xe:null;(0,E.t)({post:Bn,meteringInfo:jn,clientViewedContext:N.bo,overrideCommonData:{referrer:mn,referrerSource:In}}),u.useEffect((function(){if(!Rn&&Qe===J.id){var e=new URL(vn).pathname;if(Ln)wn.push({pathname:e});else if(Tn){var n=null==Mn?void 0:Mn.postResult;if((0,q.f)(n)){try{var t=function(e,n){var t,i,a,r,o,l,d,s;if(null==e||null===(t=e.extendedPreviewContent)||void 0===t||null===(i=t.bodyModel)||void 0===i||null===(a=i.paragraphs)||void 0===a||!a.length)throw new Error("Expected post to have preview content.");e.extendedPreviewContent.bodyModel.paragraphs;var m=new Map;null!=e&&null!==(r=e.extendedPreviewContent)&&void 0!==r&&null!==(o=r.bodyModel)&&void 0!==o&&null!==(l=o.paragraphs)&&void 0!==l&&l.length&&e.extendedPreviewContent.bodyModel.paragraphs.forEach((function(e){m.set(e.name,e)}));var u=[],p=(e.content.bodyModel.paragraphs,[]);null!=e&&null!==(d=e.content)&&void 0!==d&&null!==(s=d.bodyModel)&&void 0!==s&&s.paragraphs&&e.content.bodyModel.paragraphs.forEach((function(e){var n,t,i=m.get(e.name);i&&(null===(n=i.text)||void 0===n?void 0:n.length)===(null===(t=e.text)||void 0===t?void 0:t.length)?u.push(i):p.push(e)}));var g=[].concat(u,p);return c()({},e,{content:Ce(Ce(Ce({},e.extendedPreviewContent),e.content),{},{isFullContent:!0,bodyModel:Ce(Ce(Ce({},e.extendedPreviewContent.bodyModel),e.content.bodyModel),{},{paragraphs:(0,F.e)(g,n,!1)})})})}(n,vn);Je(t.id),Ze(t)}catch(n){wn.push({pathname:e})}Ke(!1)}else wn.push({pathname:e})}else Dn()}}),[Qe,Tn,Rn,Mn,Ln,vn]),u.useEffect((function(){an&&on.event("client.navigate",{metadata:{},newPath:gn||"",oldPath:mn||"",source:In||""})}),[an]);var Un=u.useCallback((function(e){var n;if(!e||!e.metaKey&&1!==e.button){e&&e.preventDefault(),Ke(!0);var t=null===(n=He.current)||void 0===n?void 0:n.getBoundingClientRect();null!=t&&t.top&&(ze.current=t.top),Je(J.id),nn(!0)}}),[]),Wn=u.useCallback((function(){Tn||Dn()}),[Tn]);(0,z.L)((function(){var e,n=null===(e=He.current)||void 0===e?void 0:e.getBoundingClientRect();if(null!=Xe&&Xe.id&&an&&n){var t=n.top-(ze.current||0);Boolean(t)&&null!=rn&&rn.id&&rn.id!==Xe.id&&window.scrollBy(0,t)}}),[null==Xe?void 0:Xe.id,an]);var Vn=wn.location,Hn=u.useCallback((function(e){if(null!=Xe&&Xe.id&&e){var n=new URL(vn).pathname,t=(0,K.d)(Vn.search.slice(1)).p===J.id||n===Vn.pathname,i=!!e.intersectionRatio;if(!i&&t)return nn(!1),void wn.goBack();if(i&&!t){var a,r,o=(null===(a=Vn.state)||void 0===a?void 0:a.preExpandedLocation)||Vn,l={pathname:Vn.pathname,search:"?p=".concat(Xe.id),state:{preExpandedLocation:o}};return Re&&(l={pathname:n,state:{preExpandedLocation:o}}),window.history.scrollRestoration="manual",nn(!0),void(null!==(r=Vn.state)&&void 0!==r&&r.preExpandedLocation?wn.replace(l):wn.push(l))}}}),[J.id,null==Xe?void 0:Xe.id,wn,Vn,vn]),zn=u.useCallback((function(){return!an}),[an]);(0,L.S)({onIntersect:Hn,target:He,disconnect:zn},[an,Hn]);var Gn=(0,B.$B)(Vn.pathname);u.useEffect((function(){var e=Gn?(0,$.mrd)(Gn):null;en?"post"===(null==Gn?void 0:Gn.route.mediumAppPage)&&e===Qe||tn():"post"===(null==Gn?void 0:Gn.route.mediumAppPage)&&e===J.id&&(Un(),He.current&&He.current.scrollIntoView(!0))}),[null==Gn?void 0:Gn.route.mediumAppPage,null==Gn?void 0:Gn.params.postId]);var Yn=u.useRef(!1);u.useEffect((function(){Yn.current=an}),[an]),u.useEffect((function(){return function(){Yn.current&&tn()}}),[]);var qn=(0,V.p9)((function(e){return e.config.isAmp}));if(null==J||null===(n=J.extendedPreviewContent)||void 0===n||!n.bodyModel)return null;var Kn=null==J||null===(t=J.extendedPreviewContent)||void 0===t?void 0:t.bodyModel;if(!Kn)return null;var $n=Ce(Ce({},Kn),{},{paragraphs:(0,F.e)(Kn.paragraphs,vn)}),Qn=!!En&&!!xn,Jn=Qn?xn:bn,Xn=Qn?"Updated ":"",Zn=!(null==J||null===(i=J.extendedPreviewContent)||void 0===i||!i.isFullContent),et=ne&&!oe&&u.createElement(_.V,{styleRules:Oe}),nt=ae&&u.createElement(_.V,{styleRules:Oe}),tt=Re?{}:oe?De:Ae,it={postId:fn,collectionId:null==hn?void 0:hn.id,isFullPost:null==Sn?void 0:Sn.isFullContent,postVisibility:(0,P.z)(Pn),context:2,pinned:Boolean(En)},at="User"===(null==le?void 0:le.__typename)&&J.collection?J.collection:J.creator,rt="User"===(null==le?void 0:le.__typename),ot="Collection"===(null==le?void 0:le.__typename),lt="User"===(null==le?void 0:le.__typename)?Fn:En,dt=(0,y.LI)($n.paragraphs),st="number"==typeof dt.titleIndex?void 0:40,ct=u.createElement(u.Fragment,{key:"card-byline-and-mixtape"},Re&&J.creator&&!rt?u.createElement(Se.iN,{creator:J.creator,collection:J.collection,href:vn,datePrefix:Xn,publishedAt:Jn,showStar:!!yn,showPinned:ke&&!!lt,post:J,showPublisherInfo:we,showCollectionName:!ot}):at&&u.createElement(w.u_,{publisher:at,hideAuthor:rt||se,href:vn,isOneLine:!0,datePrefix:Xn,publishedAt:Jn,showStar:!!yn,showPinned:ke&&!!lt,post:J}),ge&&u.createElement(h.h,{padding:"24px 0 0",post:J,postPreviewMarginBottom:st})),mt=$n.paragraphs[0]&&Me.includes($n.paragraphs[0].type)&&$n.paragraphs[0].name,ut=$n.paragraphs[1]&&Te.includes($n.paragraphs[1].type)&&$n.paragraphs[1].name,pt=le||J.creator,gt=!(Zn||an||qe||!Nn||!pt),vt=yn&&(2===$n.paragraphs.length||3===$n.paragraphs.length)&&1===Kn.sections.length&&ut&&mt,kt=$n.paragraphs[0],ft=$n.paragraphs[1],ht={insertType:"BYLINE",order:"before",component:ct},St={insertType:"MEDIA_OVERLAY",order:"after",component:u.createElement(Ie,{key:"shortform-media-overlay-insert",href:vn,onReadMore:Un})},yt=null!=ft&&ft.name&&null!=kt&&kt.name?(r={},o()(r,ft.name,[ht]),o()(r,kt.name,[St]),r):{},bt=vt&&!an,xt=vt&&!Re,Nt=!xe||an,Et="number"==typeof dt.titleIndex?$n.paragraphs[dt.titleIndex].text:null,Ft="number"==typeof dt.subtitleIndex?$n.paragraphs[dt.subtitleIndex].text:null;Re&&(!Ft||Ft.length<400)&&(Ft=$n.paragraphs.reduce((function(e,n,t){return t!==dt.titleIndex&&t!==dt.subtitleIndex&&t!==dt.kickerIndex&&!Me.includes(n.type)&&(null===e||e.length<400)?null===e?n.text:e+" "+n.text:e}),null!==Ft?Ft+" — ":null));var Pt=yn?{className:"meteredContent"}:{};return u.createElement(T.cW,{source:sn},an&&"Post"===(null==Mn||null===(l=Mn.postResult)||void 0===l?void 0:l.__typename)&&u.createElement(b.h,{isAmp:qn,post:Mn.postResult}),u.createElement("article",Pt,u.createElement(C.x,a()({ref:He,boxSizing:"content-box",marginLeft:"auto",marginRight:"auto"},Z?{}:tt),u.createElement(O.P,{size:We},et,u.createElement(j.o,{post:Ce(Ce({},J),{},{previewContent:{isFullContent:Zn}}),presentationContext:"POST_PREVIEW",isDisplayingFullPost:Zn||an,suppressedEvents:Zn?"VIEWED":void 0,shouldReportClientViewed:an,reportClientViewedOnFullPost:!0,postClientViewedContext:2,pinned:!!En},u.createElement(C.x,{paddingTop:et?xt?{xs:"48px",sm:"48px",md:"72px",lg:"72px",xl:"72px"}:"24px":void 0},at&&!xt&&ct,Re&&an&&u.createElement(ie,{expansionRef:He,basePostUrl:gn,referrer:mn,referrerSource:In}),an&&!(null==Xe||!Xe.isLocked)&&!!jn&&"Post"===(null==Mn||null===(s=Mn.postResult)||void 0===s?void 0:s.__typename)&&u.createElement(C.x,{margin:"0 16px"},u.createElement(k.rh,{meteringInfo:jn,post:Mn.postResult})),u.createElement(C.x,{marginTop:vt?"":"12px",ref:kn},u.createElement(H.O1,{event:{eventName:"post.permalinkClicked",data:Ce(Ce({},it),{},{interfaceElement:"title"})}},u.createElement(be.$,{post:J,postUrl:vn,index:ce,reason:Ne,publisherContext:null===(U=J.creator)||void 0===U?void 0:U.__typename,showPreview:xe,showContent:qe||an,titleText:Et,subTitleText:Ft,onReadMore:Un,onHoverReadMore:Wn,showNegativeSignalMenu:je,footerActionsMenu:Be},u.createElement(u.Fragment,null,u.createElement(x.b,{isAuroraPostPageEnabled:!0,post:an?Xe:null,inlinePost:J,ref:Ve,richTextStyle:bt?"SHORTFORM_CARD":"INLINE",postBodyInserts:bt?yt:null,markedUpBodyModel:$n}),qe&&u.createElement(C.x,{paddingTop:"24px"},u.createElement(Fe,null))))))),gt&&!xe&&u.createElement(D.D,{onMouseEnter:Wn,onMouseLeave:function(){}},u.createElement(Pe.y,{onReadMore:Un,post:J,padding:xt?"24px 0 0 0":void 0})),Xe&&jn&&an&&u.createElement(f.cu,{post:Xe,meteringInfo:jn,excludePadding:!0}))),u.createElement(C.x,{marginTop:xe&&!an?void 0:"36px"}),J&&Nt&&u.createElement(g.T,{isDockingEnabled:Re&&an,maxWidthSize:We},u.createElement(ye.T,{post:J,publisherContext:null===(Q=J.creator)||void 0===Q?void 0:Q.__typename,isActiveExpandedPost:an,showNegativeSignalMenu:je,actionsMenu:Be})),xe&&an&&u.createElement(C.x,{paddingBottom:"32px"}))),ae&&u.createElement(O.P,{size:We},nt))}))},56365:(e,n,t)=>{"use strict";t.d(n,{f:()=>g,w:()=>v});var i=t(28655),a=t.n(i),r=t(67154),o=t.n(r),l=t(6479),d=t.n(l),s=t(71439),c=t(67294),m=t(85489),u=t(42933);function p(){var e=a()(["\n  fragment CustomBackgroundWrapper_customStyleSheet on CustomStyleSheet {\n    id\n    global {\n      colorPalette {\n        background {\n          ...getHexFromColorValue_colorValue\n        }\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var g=function(e){var n=e.children,t=e.customStyleSheet,i=d()(e,["children","customStyleSheet"]);return c.useMemo((function(){var e,n;return(0,m.eQ)(null==t||null===(e=t.global)||void 0===e||null===(n=e.colorPalette)||void 0===n?void 0:n.background)}),[t])?c.createElement(u.x,o()({backgroundColor:"BACKGROUND"},i),n):c.createElement(u.x,i,n)},v=(0,s.Ps)(p(),m.xW)},32149:(e,n,t)=>{"use strict";t.d(n,{G:()=>o});var i=t(28655),a=t.n(i);function r(){var e=a()(["\n  fragment useShouldShowEntityDrivenSubscription_creator on User {\n    id\n  }\n"]);return r=function(){return e},e}var o=(0,t(71439).Ps)(r())},39935:(e,n,t)=>{"use strict";t.d(n,{n:()=>c});var i=t(46829),a=t(8403),r=t(67297),o=t(319),l=t.n(o),d=t(58197),s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostViewerEdgeContentQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PostMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"fullContent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isLockedPreviewOnly"}},{kind:"Field",name:{kind:"Name",value:"validatedShareKey"}},{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"PostBody_bodyModel"}}]}}]}}]}}]}}]}}]}}].concat(l()(d.Pk.definitions))},c=function(){var e,n,t,o,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=(0,r.v9)((function(e){return e.navigation.referrer})),m=null!==(e=(0,a.G1)())&&void 0!==e?e:void 0,u=null!==(n=(0,a.PM)())&&void 0!==n?n:void 0,p={referrer:c,sk:m,source:u},g=(0,i.useQuery)(s,{variables:{postId:l,postMeteringOptions:p},ssr:!1,skip:!l||!d}),v=g.loading,k=g.error,f=g.data,h=null==f||null===(t=f.post)||void 0===t||null===(o=t.viewerEdge)||void 0===o?void 0:o.fullContent;return v?{loading:v}:k?{error:k}:{content:h}}},37395:(e,n,t)=>{"use strict";t.d(n,{l:()=>d});var i=t(28655),a=t.n(i),r=t(46829),o=t(71439);function l(){var e=a()(["\n  query TopicViewerEdge($topicId: ID!) {\n    topic(id: $topicId) {\n      ... on Topic {\n        id\n        viewerEdge {\n          id\n          isFollowing\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var d=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,r.useQuery)(s,{variables:{topicId:n},ssr:!1,skip:!n}),i=t.loading,a=t.error,o=t.data;return i?{loading:i}:a?{error:a}:{viewerEdge:null==o||null===(e=o.topic)||void 0===e?void 0:e.viewerEdge}},s=(0,o.Ps)(l())},37258:(e,n,t)=>{"use strict";t.d(n,{o:()=>y});var i=t(63038),a=t.n(i),r=t(28655),o=t.n(r),l=t(71439),d=t(80439),s=t(67294),c=t(66893),m=t(36511),u=t(90738),p=t(14414),g=t(95760),v=t(51512),k=t(11348),f=t(67297);function h(){var e=o()(["\n  mutation SendAcctAuthEmailByUserId(\n    $userId: String!\n    $redirect: String\n    $fullName: String\n    $captchaValue: String\n  ) {\n    sendAcctAuthEmailByUserId(\n      userId: $userId\n      redirect: $redirect\n      fullName: $fullName\n      captchaValue: $captchaValue\n    ) {\n      ... on SusiMethod {\n        value\n      }\n      ... on BadRequest {\n        message\n      }\n      ... on FailedChallenge {\n        message\n      }\n      ... on NotFound {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}var S=(0,l.Ps)(h()),y=function(e){var n=e.actionUrl,t=e.children,i=e.onSuccess,r=e.token,o=e.userId,l=(0,g.Av)(),h=!!(0,c.P5)("skip_sign_in_recaptcha"),y=s.useState(!1),b=a()(y,2),x=b[0],N=b[1],E=(0,f.v9)((function(e){return e.navigation.currentLocation})),F=function(){N(!1)},P=(0,v.pK)(),w=(0,v.hp)(),I=n&&r?(0,p.hQ)(E,P,w,n,r):(0,p.hQ)(E,P,w),_=(0,m.r)(),C=_.loading,O=_.error,D=_.viewerId;return C||O?null:s.createElement(d.mm,{mutation:S,onCompleted:function(e){switch(e.sendAcctAuthEmailByUserId.__typename){case"SusiMethod":l.event("site.loginLinkSent",{}),i&&i();break;case"FailedChallenge":l.event("site.loginByEmailCaptchaFailure",{}),N(!1);break;case"BadRequest":case"NotFound":default:F()}},onError:F},(function(e){var n=function(n){(0,k.Zs)(!0,D,o,"Email",!1);var t="medium";l.event("susi.methodClicked",{entryPoint:w,operation:"login",susiMethod:t.toLowerCase(),alternateUserSuggestionShown:!0,alternateUserSuggestionAccountType:t.toLowerCase(),alternateUserSuggestionTargetUserId:o,alternateUserSuggestionSourceUserId:D}),e({variables:{userId:o,redirect:I,captchaValue:n}})};return s.createElement(s.Fragment,null,!h&&s.createElement(u.k,{callback:n,shouldExecuteRecaptcha:x}),t({handleSubmit:function(){return h?n(null):N(!0)}}))}))}},19608:(e,n,t)=>{"use strict";t.d(n,{r:()=>d});var i=t(67294),a=t(90174),r=t(4134),o=t(70146),l=t(37581),d=function(e){var n=e.actionUrl,t=e.token,d=e.userSocialLogins,s={actionUrl:n||"",operation:"login",token:t||"",targetUserId:d.userId,alternateUserSuggestion:!0};return i.createElement(l.$,{eventData:{operation:s.operation}},d.google?i.createElement(r.x,s):d.facebook?i.createElement(a.q,s):d.twitter?i.createElement(o.G,s):i.createElement(i.Fragment,null))}},27168:(e,n,t)=>{"use strict";t.d(n,{G:()=>p});var i=t(59713),a=t.n(i),r=t(67294),o=t(12291),l=t(76532),d=t(82318),s=t(51512),c=t(85277),m=t(67297);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}var p=function(e){var n=e.declineSuggestedAccount,t=e.isSocial,i=(0,m.v9)((function(e){return e.navigation.hasRenderedAlternateUserBanner})),p=(0,s.hp)(),g=(0,o.I0)(),v=(0,l.H)(),k=v.loading,f=v.error,h=v.value;if(k||f)return r.createElement(r.Fragment,null);var S=function(e){return e?r.createElement(d.r,{onClick:function(){return y("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"See all login options"):r.createElement(r.Fragment,null,"Not you?"," ",r.createElement(d.r,{onClick:function(){return y("SIGNIN_OPTIONS")},linkStyle:"OBVIOUS"},"Sign in")," or ",r.createElement(d.r,{onClick:function(){return y("SIGNUP_OPTIONS")},linkStyle:"OBVIOUS"},"create an account"))},y=function(e){var t="SIGNIN_OPTIONS"===e?"login":"register";n(),g((0,c.Pc)(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({operation:t,step:e},!!p&&{susiEntry:p})))};return i?S(h):h?r.createElement(d.r,{onClick:function(){return n()}},"Not me"):S(t)}},48881:(e,n,t)=>{"use strict";t.d(n,{o:()=>b});var i=t(28655),a=t.n(i),r=t(59713),o=t.n(r),l=t(63038),d=t.n(l),s=t(71439),c=t(80439),m=t(67294),u=t(76532),p=t(36511),g=t(95760),v=t(51512),k=t(33572),f=t(8403);function h(){var e=a()(["\n  query UserSocialLoginsQuery($userId: String!) {\n    userSocialLogins(userId: $userId) {\n      userId\n      twitter\n      facebook\n      google\n      redactedEmailAddress\n      isMember\n      emailAddress\n      userAvatar {\n        __typename\n        username\n        name\n        imageId\n        mediumMemberAt\n      }\n    }\n  }\n"]);return h=function(){return e},e}function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){o()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var b=function(e){var n=e.children,t=e.postRenderCallback,i=(0,g.Av)(),a=(0,v.hp)(),r=(0,f.PM)(),o=(0,v.P7)(r||""),l=o.userId,s=o.name,h=m.useState({shouldRun:!1,showSuggestedAccount:!1,userSocialLogins:{facebook:!1,google:!1,twitter:!1,redactedEmailAddress:"",emailAddress:"",userAvatar:{__typename:"UserAvatar",username:"",name:"",imageId:"",mediumMemberAt:0},userId:"",isMember:!1}}),S=d()(h,2),b=S[0],N=S[1];m.useEffect((function(){var e=b.shouldRun,n=b.showSuggestedAccount,i=b.userSocialLogins;e&&t(E,n,i)}),[b.shouldRun]);var E=(0,u.H)().value,F=(0,p.r)(),P=F.loading,w=F.error,I=F.viewerId;if(P||w)return null;var _=!("email"!==s||E&&E.mediumMemberAt||!l);return _&&l?m.createElement(c.AE,{query:x,variables:{userId:l}},(function(e){var r=e.loading,o=e.error,l=e.data,d=(l=void 0===l?{}:l).userSocialLogins,s=!(r||o||!d||E&&!d.isMember||!d.facebook&&!d.google&&!d.twitter&&!d.redactedEmailAddress),c=y({loading:r,showSuggestedAccount:s},s&&{userSocialLogins:d,declineSuggestedAccount:function(){var e=(0,k.S)(d);i.event("susi.suggestNotYou",{entryPoint:a,susiMethod:e,alternateUserSuggestionAccountType:e,alternateUserSuggestionTargetUserId:null==d?void 0:d.userId,alternateUserSuggestionSourceUserId:I})}});return!t||r||b.shouldRun||N({shouldRun:!0,showSuggestedAccount:s,userSocialLogins:d}),n(c)})):(t&&!b.shouldRun&&N(y(y({},b),{},{shouldRun:!0})),n({showSuggestedAccount:_,loading:!1}))},x=(0,s.Ps)(h())},5731:(e,n,t)=>{"use strict";var i;t.d(n,{j:()=>i}),function(e){e.LOHighlightCTA="lo_highlight_cta",e.LIHighlightCTA="li_highlight_cta",e.RegWall="regwall",e.SyndicatedRegwall="syndicated_regwall"}(i||(i={}))},58491:(e,n,t)=>{"use strict";t.d(n,{t:()=>h,W:()=>S});var i=t(28655),a=t.n(i),r=t(63038),o=t.n(r),l=t(71439),d=t(67294),s=t(12291),c=t(50188),m=t(95760),u=t(51512),p=t(27108),g=t(85277),v=t(8403),k=t(21146);function f(){var e=a()(["\n  fragment PostReadTracker_post on Post {\n    id\n    collection {\n      slug\n    }\n    sequence {\n      sequenceId\n    }\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n    }\n  }\n"]);return f=function(){return e},e}function h(e,n,t,i){var a=(0,m.Av)(),r=(0,u.pK)(),l=(0,v.he)(),f=d.useState(!1),h=o()(f,2),S=h[0],y=h[1],b=(0,s.I0)();d.useEffect((function(){if(!S&&t){var o=function(){if(n.current&&!S){var o=(0,k.L6)(n.current),d=(0,k.tM)(o),s=d.top+d.height,m=(0,k.tM)((0,k.t_)()),u=m.top+m.height,p=t.content.isLockedPreviewOnly,v=i||r.includes("post_page");if(!p&&u>=s-100&&v){y(!0),b((0,g.C2)(!0));var f={source:i?"post_page":r,postId:t.id,collectionSlug:t.collection?t.collection.slug:"",sequenceId:t.sequence?t.sequence.sequenceId:""},h={referrer:l,referrerSource:r};i?a.event("post.clientRead",f,h):a.event("post.clientRead",f),e||(0,c.T8)(t.id)}}};return p.V6.on("scroll_end",o),function(){p.V6.off("scroll_end",o)}}}),[S,t,i]),d.useEffect((function(){return function(){b((0,g.C2)(!1))}}),[])}var S=(0,l.Ps)(f())},2874:(e,n,t)=>{"use strict";t.d(n,{d0:()=>T,_k:()=>M});var i=t(28655),a=t.n(i),r=t(71439),o=t(67294),l=t(26463),d=t(51562),s=t(47578),c=t(26022),m=t(56365),u=t(10103),p=t(71542),g=t(53976),v=t(76532),k=t(11852),f=t(42933),h=t(30027),S=t(55099),y=t(82318),b=t(41996),x=t(17614),N=t(98024),E=t(95760),F=t(51512),P=t(67297),w=t(6522),I=t(69908),_=t(96879),C=t(27952),O=t(61598);function D(){var e=a()(["\n  fragment EntityDrivenSubscriptionLandingPageScreen_writer on User {\n    name\n    imageId\n    id\n    username\n    isPartnerProgramEnrolled\n    referredMembershipCustomHeadline\n    referredMembershipCustomBody\n    customStyleSheet {\n      ...CustomThemeProvider_customStyleSheet\n      ...CustomBackgroundWrapper_customStyleSheet\n      ...MetaHeader_customStyleSheet\n    }\n    ...MetaHeader_publisher\n    ...userUrl_user\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return D=function(){return e},e}var A="entity-driven-sub-landing-page",T=function(e){var n,t,i=e.user,a=e.redirectExperiment,r=e.postId,O=(0,P.v9)((function(e){return e.config.authDomain})),D=(0,F.pK)(),T=(0,v.H)().value,M=(0,E.Av)(),R=(0,P.v9)((function(e){return e.config.productName})),L=T&&T.id===i.id,j=(0,I.s)()||b.j.lg,B=!!(0,g.VB)({name:"enable_referred_memberships_custom_messaging",placeholder:!1}),U=j===b.j.xs||j===b.j.sm;o.useEffect((function(){M.event("entityDrivenSubscriptionPage.viewed",{creatorId:null==i?void 0:i.id,source:D})}),[]);var W=o.useCallback((function(){M.event("entityDrivenSubCallToAction.clicked",{userId:null==T?void 0:T.id,entityId:null==i?void 0:i.id})}),[i,null==T?void 0:T.id,O]);if(!i)return null;var V=null!==(n=i.name)&&void 0!==n?n:"",H=null!==(t=i.imageId)&&void 0!==t?t:w.gG,z=i.id,G=(0,C.AWr)(i,O),Y=(0,_.Rk)((0,C.c5p)(O),{subscribeToUserId:z,susiEntry:"entity_driven_subscription_lp"}),q=r?(0,C.o2w)(O,r):G,K=null!=T&&T.mediumMemberAt?G:Y,$="Read every story from ".concat(V," (and thousands of other writers on ").concat(R,")."),Q="Your membership fee directly supports ".concat(V," and other writers you read. You'll also get full access to every story on ").concat(R,"."),J=B&&i.referredMembershipCustomHeadline?i.referredMembershipCustomHeadline:$,X=B&&i.referredMembershipCustomBody?i.referredMembershipCustomBody:Q;return(0,s.KQ)({},V),o.createElement(o.Fragment,null,o.createElement(F.cW,{source:{name:"entity_driven_subscription",userId:z}},o.createElement(u.G8,{customStyleSheet:i.customStyleSheet},o.createElement(m.f,{customStyleSheet:i.customStyleSheet},o.createElement(f.x,{display:"flex",height:"100vh",flexDirection:"column"},o.createElement(f.x,null,U?o.createElement(l.kw,{isLogoCentered:!1,marginBottomSm:0}):o.createElement(c.Go,{forceSmall:!0,publisher:i,customStyleSheet:i.customStyleSheet})),o.createElement(f.x,{display:"flex",height:"0",flexGrow:"1",textAlign:"center",justifyContent:"center",alignItems:"center",flexDirection:"column"},o.createElement(h.P,{size:"inset"},o.createElement(f.x,{display:"flex",paddingBottom:"32px",justifyContent:"center"},o.createElement(p.s,null,o.createElement(k.z,{miroId:H,alt:V||"",diameter:128,freezeGifs:!1})),o.createElement(p.e,null,o.createElement(k.z,{miroId:H,alt:V||"",diameter:80,freezeGifs:!1}))),o.createElement(f.x,{paddingBottom:"20px"},o.createElement(x.F1,{scale:{xs:"S",sm:"S",md:"L",lg:"L",xl:"L"}},o.createElement(d.W,{featureString:A,target:"title-copy"},J))),o.createElement(f.x,{paddingBottom:"20px"},o.createElement(N.F,{scale:"L",color:"DARKER"},o.createElement(d.W,{featureString:A,target:"description-copy"},X))),o.createElement(f.x,{display:"flex",paddingBottom:"20px",flexDirection:{xs:a?"column-reverse":void 0,sm:a?"column-reverse":void 0,md:void 0,lg:void 0,xl:void 0},justifyContent:"center"},a&&o.createElement(f.x,{paddingRight:{xs:void 0,sm:void 0,md:"12px",lg:"12px",xl:"12px"},paddingTop:{xs:"12px",sm:"12px",md:void 0,lg:void 0,xl:void 0}},o.createElement(S.z,{href:q,buttonStyle:"OBVIOUS",size:"LARGE"},"Not now")),o.createElement(f.x,null,o.createElement(S.z,{onClick:W,href:K,buttonStyle:"STRONG",size:"LARGE"},o.createElement(d.W,{featureString:A,target:"logged-in-button-copy"},"Become a member")))),!a&&!L&&o.createElement(N.F,{scale:"L",color:"DARKER",tag:"span"},o.createElement(y.r,{linkStyle:"SUBTLE",href:G},o.createElement(d.W,{featureString:A,target:"link-copy"},"Visit ",V,"'s profile"))),B&&L&&o.createElement(N.F,{scale:"L",color:"ACCENT",tag:"span"},o.createElement(y.r,{linkStyle:"SUBTLE",href:(0,C.mEF)(O)},"Edit this message")))))))))},M=(0,r.Ps)(D(),O.$m,u.Kc,m.w,c.Mv,c.aU)},33572:(e,n,t)=>{"use strict";function i(e){if((e.match(/ /g)||[]).length>1)return"";var n=e.indexOf(" ");return e.substring(0,n)}function a(e){return e.google?"google":e.facebook?"facebook":e.twitter?"twitter":"medium"}t.d(n,{J:()=>i,S:()=>a})},71794:(e,n,t)=>{"use strict";t.d(n,{j7:()=>m,OO:()=>u,iI:()=>p});var i=t(28655),a=t.n(i),r=t(71439),o=t(14391),l=t(22744),d=t(50993);function s(){var e=a()(["\n  fragment shortformPostMetaDescription_post on Post {\n    id\n    metaDescription\n    seoDescription\n    shortformType\n    title\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return s=function(){return e},e}function c(){var e=a()(["\n  fragment postMetaDescription_post on Post {\n    id\n    title\n    seoDescription\n    metaDescription\n    creator {\n      id\n      name\n    }\n    collection {\n      id\n      name\n    }\n    previewContent {\n      subtitle\n    }\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return c=function(){return e},e}var m=function(e){return function(e){var n=e.metaDescription,t=e.seoDescription,i=e.title||"";if(t)return t;if(n)return n;var a=function(e){var n=(0,l.r4)(e,250);return n&&(0,d.N8)(n,200)}(e);if(a.length>150)return a;var r=e.previewContent&&e.previewContent.subtitle||"";if(r.length>140)return r;r.length>0&&(r+=".");var o=(i.length?i+". ":"")+r;if(o.length>140)return o;var s="“".concat(i,"” is published");return e.creator&&e.creator.name&&(s+=" by ".concat(e.creator.name)),e.collection&&e.collection.name&&(s+=" in ".concat(e.collection.name)),"".concat(r," ").concat(s,".")}(e).trim()},u=function(e,n){var t=e.metaDescription,i=e.seoDescription,a=e.shortformType,r=a===o.po.SHORTFORM_TYPE_NOTE||!a;if(i)return i;if(t)return t;if(r&&n){var s=(0,l.r4)(e,350,0);return(0,d.N8)(s,300)}return""},p=(0,r.Ps)(c(),l.bh);(0,r.Ps)(s(),l.bh)},34279:(e,n,t)=>{"use strict";t.d(n,{bh:()=>r,dm:()=>s,bq:()=>c,Pz:()=>m,HF:()=>u});var i=t(319),a=t.n(i),r={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"getPostContentAsString_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"mixtapeMetadata"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"href"}}]}}]}}]}}]}}]}}]},o=[{kind:"FragmentDefinition",name:{kind:"Name",value:"appendPostContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"sequence"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}],l=[{kind:"FragmentDefinition",name:{kind:"Name",value:"maybeAppendProductName_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"domain"}}]}}],d={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"postTitle_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"seoTitle"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"appendPostContext_post"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"FragmentSpread",name:{kind:"Name",value:"maybeAppendProductName_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"previewContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"subtitle"}}]}}]}}].concat(a()(r.definitions),a()(o),a()(l))},s={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"getTitleDetails_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postMeteringOptions"},value:{kind:"Variable",name:{kind:"Name",value:"postMeteringOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bodyModel"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"GetTitleIndexMap_bodyModel"}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}}]}}].concat(a()([{kind:"FragmentDefinition",name:{kind:"Name",value:"GetTitleIndexMap_bodyModel"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"RichText"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paragraphs"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"text"}}]}}]}}]),a()(r.definitions))},c={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"getTitleForPost_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"FragmentSpread",name:{kind:"Name",value:"postTitle_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getTitleDetails_post"}}]}}].concat(a()(d.definitions),a()(s.definitions))},m={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"shortformPostTitle_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"seoTitle"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"appendPostContext_post"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"maybeAppendProductName_collection"}}]}}]}}].concat(a()(r.definitions),a()(o),a()(l))},u={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"shouldIndexPost_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"firstPublishedAt"}},{kind:"Field",name:{kind:"Name",value:"isLimitedState"}},{kind:"Field",name:{kind:"Name",value:"isShortform"}},{kind:"Field",name:{kind:"Name",value:"shortformType"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"curationStatus"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"atsQualifiedAt"}},{kind:"Field",name:{kind:"Name",value:"customDomainState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"live"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"isSubdomain"}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"customDomainState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"live"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"status"}},{kind:"Field",name:{kind:"Name",value:"isSubdomain"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"atsQualifiedAt"}}]}},{kind:"Field",name:{kind:"Name",value:"ptsQualifiedAt"}}]}},{kind:"Field",name:{kind:"Name",value:"noIndex"}},{kind:"Field",name:{kind:"Name",value:"isIndexable"}},{kind:"FragmentSpread",name:{kind:"Name",value:"getPostContentAsString_post"}}]}}].concat(a()(r.definitions))}},22744:(e,n,t)=>{"use strict";t.d(n,{r4:()=>w,bh:()=>I,yB:()=>_,lO:()=>A,Bg:()=>T,_t:()=>M,bq:()=>R,oS:()=>L,c_:()=>j});var i=t(59713),a=t.n(i),r=t(28655),o=t.n(r),l=t(71439),d=t(93022),s=t(4743),c=t(14391),m=t(398),u=t(50993);function p(){var e=o()(["\n  fragment shouldIndexPost_post on Post {\n    id\n    firstPublishedAt\n    isLimitedState\n    isShortform\n    shortformType\n    visibility\n    curationStatus\n    creator {\n      name\n      atsQualifiedAt\n      customDomainState {\n        live {\n          status\n          isSubdomain\n        }\n      }\n    }\n    collection {\n      customDomainState {\n        live {\n          status\n          isSubdomain\n        }\n      }\n      creator {\n        atsQualifiedAt\n      }\n      ptsQualifiedAt\n    }\n    noIndex\n    isIndexable\n    ...getPostContentAsString_post\n  }\n  ","\n"]);return p=function(){return e},e}function g(){var e=o()(["\n  fragment shortformPostTitle_post on Post {\n    id\n    title\n    seoTitle\n    ...getPostContentAsString_post\n    ...appendPostContext_post\n    collection {\n      ...maybeAppendProductName_collection\n    }\n  }\n  ","\n  ","\n  ","\n"]);return g=function(){return e},e}function v(){var e=o()(["\n  fragment getTitleForPost_post on Post {\n    id\n    title\n    ...postTitle_post\n    ...getTitleDetails_post\n  }\n  ","\n  ","\n"]);return v=function(){return e},e}function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach((function(n){a()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function h(){var e=o()(["\n  fragment postTitle_post on Post {\n    id\n    title\n    seoTitle\n    firstPublishedAt\n    ...getPostContentAsString_post\n    ...appendPostContext_post\n    collection {\n      id\n      name\n      domain\n      ...maybeAppendProductName_collection\n    }\n    creator {\n      name\n    }\n    previewContent {\n      subtitle\n    }\n  }\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function S(){var e=o()(["\n  fragment maybeAppendProductName_collection on Collection {\n    id\n    domain\n  }\n"]);return S=function(){return e},e}function y(){var e=o()(["\n  fragment getTitleDetails_post on Post {\n    id\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        ...GetTitleIndexMap_bodyModel\n      }\n    }\n    ...getPostContentAsString_post\n  }\n  ","\n  ","\n"]);return y=function(){return e},e}function b(){var e=o()(["\n  fragment getPostContentAsString_post on Post {\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        paragraphs {\n          text\n          type\n          mixtapeMetadata {\n            href\n          }\n        }\n      }\n    }\n  }\n"]);return b=function(){return e},e}function x(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return N(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?N(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==t.return||t.return()}finally{if(l)throw r}}}}function N(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function E(){var e=o()(["\n  fragment appendPostContext_post on Post {\n    id\n    sequence {\n      title\n    }\n    collection {\n      name\n    }\n    creator {\n      name\n    }\n  }\n"]);return E=function(){return e},e}function F(e,n){var t,i,a;return null!==(t=n.sequence)&&void 0!==t&&t.title?e+=" - ".concat(n.sequence.title):null!==(i=n.collection)&&void 0!==i&&i.name?e+=" - ".concat(n.collection.name):null!==(a=n.creator)&&void 0!==a&&a.name&&(e+=" - ".concat(n.creator.name)),e}var P=(0,l.Ps)(E());function w(e){var n,t,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{includeMixtapeHref:!1},l=o.includeMixtapeHref,d=(null===(n=e.content)||void 0===n||null===(t=n.bodyModel)||void 0===t?void 0:t.paragraphs)||[],s="",c=x(d);try{for(c.s();!(i=c.n()).done;){var m=i.value,u=m.mixtapeMetadata,p=m.text,g=m.type;if(l&&null!=u&&u.href?s+=s?" ".concat(u.href):u.href:"P"===g&&p&&p.length>r&&(s+=s?" ".concat(p):p),s.length>a)break}}catch(e){c.e(e)}finally{c.f()}return s}var I=(0,l.Ps)(b());function _(e){var n=!1,t="";if(e.content&&e.content.bodyModel&&e.content.bodyModel.paragraphs){var i=e.content.bodyModel.paragraphs,a=(0,s.LI)(i).titleIndex;"number"==typeof a&&(t=i[a].text||"",n=!0)}return{hasTitleGraf:n,latestTitle:t}}var C=(0,l.Ps)(y(),I,s.k);function O(e,n,t){return null!=t&&t.domain?e:"".concat(e," - ").concat(n)}var D=(0,l.Ps)(S());function A(e,n){var t,i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.seoTitle,o=e.title||"",l=(null===(t=e.previewContent)||void 0===t?void 0:t.subtitle)||"";if(r)return(0,m.p)(r,e.collection&&e.collection.name,n);if(!a)return o.length>50?o:o=O(o=F(o,e),n,e.collection);o.length<33&&l&&(l=(0,u.N8)(l,40),o+=". ".concat(l)),null!==(i=e.creator)&&void 0!==i&&i.name&&(o+=" | by ".concat(e.creator.name));var s="",c=Date.now()-5184e6;e.firstPublishedAt>=c&&(s=" | ".concat((0,d.Z)(e.firstPublishedAt,"LLL, yyyy")));var p=e.collection;return p?p.domain?o+="".concat(s," | ").concat(p.name):o+=" | ".concat(p.name).concat(s," | ").concat(n):o+="".concat(s," | ").concat(n),o}var T=(0,l.Ps)(h(),I,P,D);function M(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_(e),i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.title||"",r=t.latestTitle||a,o=f(f({},e),{},{title:r});return A(o,n,i).trim()}var R=(0,l.Ps)(v(),T,C);function L(e,n,t){var i=e.seoTitle,a=e.title||"";return i?(0,m.p)(i,e.collection&&e.collection.name,n):a=O(a=F(a=function(e,n,t){var i=n.shortformType,a=i===c.po.SHORTFORM_TYPE_NOTE||!i;return t||(a?e=w(n,250,0):i===c.po.SHORTFORM_TYPE_LINK&&(e=w(n,250,0,{includeMixtapeHref:!0}))),(0,u.N8)(e,200)}(a,e,t),e),n,e.collection)}function j(e){var n,t,i,a,r=e.noIndex,o=e.collection,l=e.curationStatus,d=e.firstPublishedAt,s=e.isLimitedState,m=e.isShortform,u=e.shortformType,p=e.visibility,g=e.isIndexable,v=u===c.po.SHORTFORM_TYPE_NOTE||!u;if(r)return{shouldIndexPost:!1,indexReason:"noIndex is set"};if(!d)return{shouldIndexPost:!1,indexReason:"draft"};if("PUBLIC"!==p&&"LOCKED"!==p)return{shouldIndexPost:!1,indexReason:"unlisted (PUBLIC | LOCKED)"};if(s)return{shouldIndexPost:!1,indexReason:"limited state"};if(m)if(v){if(w(e,10,0).length<=10)return{shouldIndexPost:!1,indexReason:"insufficient content <=10 chars"}}else if(0===w(e,10,0).length)return{shouldIndexPost:!1,indexReason:"shortform with no commentary"};if(g&&d<16347744e5)return{shouldIndexPost:!0,indexReason:"english, has spam score < 0.025 & published before 10/21/2021"};if((null===(n=e.creator)||void 0===n?void 0:n.atsQualifiedAt)>0||o&&o.ptsQualifiedAt>0)return{shouldIndexPost:!0,indexReason:"author or pub is high-quality"};if(l&&(l===c.Xg.CURATION_STATUS_DISTRIBUTED||l===c.Xg.CURATION_STATUS_DISTRIBUTED_AND_DISABLED))return{shouldIndexPost:!0,indexReason:"curated post"};var k=["DELETED","FAILED","UNSPECIFIED"],f=null==o||null===(t=o.customDomainState)||void 0===t?void 0:t.live,h=null===(i=e.creator)||void 0===i||null===(a=i.customDomainState)||void 0===a?void 0:a.live;return f&&!f.isSubdomain&&!k.includes(f.status)||h&&!h.isSubdomain&&!k.includes(h.status)?{shouldIndexPost:!0,indexReason:"custom domain user or pub"}:{shouldIndexPost:!1,indexReason:"no matching rule"}}(0,l.Ps)(g(),I,P,D),(0,l.Ps)(p(),I)},398:(e,n,t)=>{"use strict";t.d(n,{N:()=>i,p:()=>a});var i=function(e){return e||"Untitled story"},a=function(e,n,t){return n?"".concat(e," | ").concat(n):t?"".concat(e," | ").concat(t):e}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/68519.8dfbac07.chunk.js.map